(function(){var a;a=function(b){var c,d;d=b;if(!(c=a.modules[b])){b+="/index";if(!(c=a.modules[b]))throw"Couldn't find module for: "+d}c.exports||(c.exports={},c.call(c.exports,c,c.exports,a.bind(b)));return c.exports},a.modules={},a.bind=function(b){return function(c){var d,e,f,g,h;if(c.charAt(0)!==".")return a(c);g=b.split("/"),g.pop(),f=c.split("/");for(d=0,e=f.length;d<e;d++)h=f[d],h===".."?g.pop():h!=="."&&g.push(h);return a(g.join("/"))}},a.module=function(b,c){return a.modules[b]=c},window.require=a}).call(this),function(a,b){var c=function(a,b){return new c.fn.init(a,b)},d=a.jQuery,e=a.$,f=a.document,g,h=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,i=/^.[^:#\[\.,]*$/,j=/\S/,k=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=navigator.userAgent,n,o=false,p=[],q,r=Object.prototype.toString,s=Object.prototype.hasOwnProperty,t=Array.prototype.push,u=Array.prototype.slice,v=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,d){var e,i,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d){this.context=f,this[0]=f.body,this.selector="body",this.length=1;return this}if(typeof a==="string"){e=h.exec(a);if(e&&(e[1]||!d)){if(e[1]){k=d?d.ownerDocument||d:f,j=l.exec(a),j?c.isPlainObject(d)?(a=[f.createElement(j[1])],c.fn.attr.call(a,d,true)):a=[k.createElement(j[1])]:(j=bp([e[1]],[k]),a=(j.cacheable?j.fragment.cloneNode(true):j.fragment).childNodes);return c.merge(this,a)}i=f.getElementById(e[2]);if(i){if(i.id!==e[2])return g.find(a);this.length=1,this[0]=i}this.context=f,this.selector=a;return this}if(!d&&/^\w+$/.test(a)){this.selector=a,this.context=f,a=f.getElementsByTagName(a);return c.merge(this,a)}return!d||d.jquery?(d||g).find(a):c(d).find(a)}if(c.isFunction(a))return g.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return u.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var e=c();c.isArray(a)?t.apply(e,a):c.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+d:b&&(e.selector=this.selector+"."+b+"("+d+")");return e},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady(),c.isReady?a.call(f,c):p&&p.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(u.apply(this,arguments),"slice",u.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||c(null)},push:t,sort:[].sort,splice:[].splice},c.fn.init.prototype=c.fn,c.extend=c.fn.extend=function(){var a=arguments[0]||{},d=1,e=arguments.length,f=false,g,h,i,j;typeof a==="boolean"&&(f=a,a=arguments[1]||{},d=2),typeof a!=="object"&&!c.isFunction(a)&&(a={}),e===d&&(a=this,--d);for(;d<e;d++)if((g=arguments[d])!=null)for(h in g){i=a[h],j=g[h];if(a===j)continue;if(f&&j&&(c.isPlainObject(j)||c.isArray(j))){var k=i&&(c.isPlainObject(i)||c.isArray(i))?i:c.isArray(j)?[]:{};a[h]=c.extend(f,k,j)}else j!==b&&(a[h]=j)}return a},c.extend({noConflict:function(b){a.$=e,b&&(a.jQuery=d);return c},isReady:false,ready:function(){if(!c.isReady){if(!f.body)return setTimeout(c.ready,13);c.isReady=true;if(p){var a,b=0;while(a=p[b++])a.call(f,c);p=null}c.fn.triggerHandler&&c(f).triggerHandler("ready")}},bindReady:function(){if(o)return;o=true;if(f.readyState==="complete")return c.ready();if(f.addEventListener)f.addEventListener("DOMContentLoaded",q,false),a.addEventListener("load",c.ready,false);else if(f.attachEvent){f.attachEvent("onreadystatechange",q),a.attachEvent("onload",c.ready);var b=false;try{b=a.frameElement==null}catch(a){}f.documentElement.doScroll&&b&&w()}},isFunction:function(a){return r.call(a)==="[object Function]"},isArray:function(a){return r.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||r.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!s.call(a,"constructor")&&!s.call(a.constructor.prototype,"isPrototypeOf"))return false;var c;for(c in a){}return c===b||s.call(a,c)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=c.trim(b);if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();c.error("Invalid JSON: "+b)},noop:function(){},globalEval:function(a){if(a&&j.test(a)){var b=f.getElementsByTagName("head")[0]||f.documentElement,d=f.createElement("script");d.type="text/javascript",c.support.scriptEval?d.appendChild(f.createTextNode(a)):d.text=a,b.insertBefore(d,b.firstChild),b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,d,e){var f,g=0,h=a.length,i=h===b||c.isFunction(a);if(e){if(i){for(f in a)if(d.apply(a[f],e)===false)break}else for(;g<h;)if(d.apply(a[g++],e)===false)break}else if(i){for(f in a)if(d.call(a[f],f,a[f])===false)break}else for(var j=a[0];g<h&&d.call(j,g,j)!==false;j=a[++g]){}return a},trim:function(a){return(a||"").replace(k,"")},makeArray:function(a,b){var d=b||[];a!=null&&(a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?t.call(d,a):c.merge(d,a));return d},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[];for(var e=0,f=a.length;e<f;e++)!c!==!b(a[e],e)&&d.push(a[e]);return d},map:function(a,b,c){var d=[],e;for(var f=0,g=a.length;f<g;f++)e=b(a[f],f,c),e!=null&&(d[d.length]=e);return d.concat.apply([],d)},guid:1,proxy:function(a,d,e){arguments.length===2&&(typeof d==="string"?(e=a,a=e[d],d=b):d&&!c.isFunction(d)&&(e=d,d=b)),!d&&a&&(d=function(){return a.apply(e||this,arguments)}),a&&(d.guid=a.guid=a.guid||d.guid||c.guid++);return d},uaMatch:function(a){a=a.toLowerCase();var b=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},browser:{}}),n=c.uaMatch(m),n.browser&&(c.browser[n.browser]=true,c.browser.version=n.version),c.browser.webkit&&(c.browser.safari=true),v&&(c.inArray=function(a,b){return v.call(b,a)}),g=c(f),f.addEventListener?q=function(){f.removeEventListener("DOMContentLoaded",q,false),c.ready()}:f.attachEvent&&(q=function(){f.readyState==="complete"&&(f.detachEvent("onreadystatechange",q),c.ready())});function w(){if(c.isReady)return;try{f.documentElement.doScroll("left")}catch(a){setTimeout(w,1);return}c.ready()}function x(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||""),b.parentNode&&b.parentNode.removeChild(b)}function y(a,d,e,f,g,h){var i=a.length;if(typeof d==="object"){for(var j in d)y(a,j,d[j],f,g,e);return a}if(e!==b){f=!h&&f&&c.isFunction(e);for(var k=0;k<i;k++)g(a[k],d,f?e.call(a[k],k,g(a[k],d)):e,h);return a}return i?g(a[0],d):b}function z(){return(new Date).getTime()}(function(){c.support={};var b=f.documentElement,d=f.createElement("script"),e=f.createElement("div"),g="script"+z();e.style.display="none",e.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var h=e.getElementsByTagName("*"),i=e.getElementsByTagName("a")[0];if(!h||!h.length||!i)return;c.support={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/red/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55$/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:e.getElementsByTagName("input")[0].value==="on",optSelected:f.createElement("select").appendChild(f.createElement("option")).selected,parentNode:e.removeChild(e.appendChild(f.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null},d.type="text/javascript";try{d.appendChild(f.createTextNode("window."+g+"=1;"))}catch(a){}b.insertBefore(d,b.firstChild),a[g]&&(c.support.scriptEval=true,delete a[g]);try{delete d.test}catch(a){c.support.deleteExpando=false}b.removeChild(d),e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function j(){c.support.noCloneEvent=false,e.detachEvent("onclick",j)}),e.cloneNode(true).fireEvent("onclick")),e=f.createElement("div"),e.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var k=f.createDocumentFragment();k.appendChild(e.firstChild),c.support.checkClone=k.cloneNode(true).cloneNode(true).lastChild.checked,c(function(){var a=f.createElement("div");a.style.width=a.style.paddingLeft="1px",f.body.appendChild(a),c.boxModel=c.support.boxModel=a.offsetWidth===2,f.body.removeChild(a).style.display="none",a=null});var l=function(a){var b=f.createElement("div");a="on"+a;var c=a in b;c||(b.setAttribute(a,"return;"),c=typeof b[a]==="function"),b=null;return c};c.support.submitBubbles=l("submit"),c.support.changeBubbles=l("change"),b=d=e=h=i=null})(),c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var A="jQuery"+z(),B=0,C={};c.extend({cache:{},expando:A,noData:{embed:true,object:true,applet:true},data:function(d,e,f){if(d.nodeName&&c.noData[d.nodeName.toLowerCase()])return;d=d==a?C:d;var g=d[A],h=c.cache,i;if(!g&&typeof e==="string"&&f===b)return null;g||(g=++B),typeof e==="object"?(d[A]=g,i=h[g]=c.extend(true,{},e)):h[g]||(d[A]=g,h[g]={}),i=h[g],f!==b&&(i[e]=f);return typeof e==="string"?i[e]:i},removeData:function(b,d){if(b.nodeName&&c.noData[b.nodeName.toLowerCase()])return;b=b==a?C:b;var e=b[A],f=c.cache,g=f[e];d?g&&(delete g[d],c.isEmptyObject(g)&&c.removeData(b)):(c.support.deleteExpando?delete b[c.expando]:b.removeAttribute&&b.removeAttribute(c.expando),delete f[e])}}),c.fn.extend({data:function(a,d){if(typeof a==="undefined"&&this.length)return c.data(this[0]);if(typeof a==="object")return this.each(function(){c.data(this,a)});var e=a.split(".");e[1]=e[1]?"."+e[1]:"";if(d===b){var f=this.triggerHandler("getData"+e[1]+"!",[e[0]]);f===b&&this.length&&(f=c.data(this[0],a));return f===b&&e[1]?this.data(e[0]):f}return this.trigger("setData"+e[1]+"!",[e[0],d]).each(function(){c.data(this,a,d)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}}),c.extend({queue:function(a,b,d){if(!a)return;b=(b||"fx")+"queue";var e=c.data(a,b);if(!d)return e||[];!e||c.isArray(d)?e=c.data(a,b,c.makeArray(d)):e.push(d);return e},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.shift();e==="inprogress"&&(e=d.shift()),e&&(b==="fx"&&d.unshift("inprogress"),e.call(a,function(){c.dequeue(a,b)}))}}),c.fn.extend({queue:function(a,d){typeof a!=="string"&&(d=a,a="fx");if(d===b)return c.queue(this[0],a);return this.each(function(b,e){var f=c.queue(this,a,d);a==="fx"&&f[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var D=/[\n\t]/g,E=/\s+/,F=/\r/g,G=/href|src|style/,H=/(button|input)/i,I=/(button|input|object|select|textarea)/i,J=/^(a|area)$/i,K=/radio|checkbox/;c.fn.extend({attr:function(a,b){return y(this,a,b,true,c.attr)},removeAttr:function(a,b){return this.each(function(){c.attr(this,a,""),this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.addClass(a.call(this,b,d.attr("class")))});if(a&&typeof a==="string"){var b=(a||"").split(E);for(var d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1)if(f.className){var g=" "+f.className+" ",h=f.className;for(var i=0,j=b.length;i<j;i++)g.indexOf(" "+b[i]+" ")<0&&(h+=" "+b[i]);f.className=c.trim(h)}else f.className=a}}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.removeClass(a.call(this,b,d.attr("class")))});if(a&&typeof a==="string"||a===b){var d=(a||"").split(E);for(var e=0,f=this.length;e<f;e++){var g=this[e];if(g.nodeType===1&&g.className)if(a){var h=(" "+g.className+" ").replace(D," ");for(var i=0,j=d.length;i<j;i++)h=h.replace(" "+d[i]+" "," ");g.className=c.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var d=typeof a,e=typeof b==="boolean";if(c.isFunction(a))return this.each(function(d){var e=c(this);e.toggleClass(a.call(this,d,e.attr("class"),b),b)});return this.each(function(){if(d==="string"){var f,g=0,h=c(this),i=b,j=a.split(E);while(f=j[g++])i=e?i:!h.hasClass(f),h[i?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean")this.className&&c.data(this,"__className__",this.className),this.className=this.className||a===false?"":c.data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(D," ").indexOf(b)>-1)return true;return false},val:function(a){if(a===b){var d=this[0];if(d){if(c.nodeName(d,"option"))return(d.attributes.value||{}).specified?d.value:d.text;if(c.nodeName(d,"select")){var e=d.selectedIndex,f=[],g=d.options,h=d.type==="select-one";if(e<0)return null;for(var i=h?e:0,j=h?e+1:g.length;i<j;i++){var k=g[i];if(k.selected){a=c(k).val();if(h)return a;f.push(a)}}return f}if(K.test(d.type)&&!c.support.checkOn)return d.getAttribute("value")===null?"on":d.value;return(d.value||"").replace(F,"")}return b}var l=c.isFunction(a);return this.each(function(b){var d=c(this),e=a;if(this.nodeType!==1)return;l&&(e=a.call(this,b,d.val())),typeof e==="number"&&(e+="");if(c.isArray(e)&&K.test(this.type))this.checked=c.inArray(d.val(),e)>=0;else if(c.nodeName(this,"select")){var f=c.makeArray(e);c("option",this).each(function(){this.selected=c.inArray(c(this).val(),f)>=0}),f.length||(this.selectedIndex=-1)}else this.value=e})}}),c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,d,e,f){if(!a||a.nodeType===3||a.nodeType===8)return b;if(f&&d in c.attrFn)return c(a)[d](e);var g=a.nodeType!==1||!c.isXMLDoc(a),h=e!==b;d=g&&c.props[d]||d;if(a.nodeType===1){var i=G.test(d);if(d==="selected"&&!c.support.optSelected){var j=a.parentNode;j&&(j.selectedIndex,j.parentNode&&j.parentNode.selectedIndex)}if(d in a&&g&&!i){h&&(d==="type"&&H.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed"),a[d]=e);if(c.nodeName(a,"form")&&a.getAttributeNode(d))return a.getAttributeNode(d).nodeValue;if(d==="tabIndex"){var k=a.getAttributeNode("tabIndex");return k&&k.specified?k.value:I.test(a.nodeName)||J.test(a.nodeName)&&a.href?0:b}return a[d]}if(!c.support.style&&g&&d==="style"){h&&(a.style.cssText=""+e);return a.style.cssText}h&&a.setAttribute(d,""+e);var l=!c.support.hrefNormalized&&g&&i?a.getAttribute(d,2):a.getAttribute(d);return l===null?b:l}return c.style(a,d,e)}});var L=/\.(.*)$/,M=function(a){return a.replace(/[^\w\s\.\|`]/g,function(a){return"\\"+a})};c.event={add:function(d,e,f,g){if(d.nodeType===3||d.nodeType===8)return;d.setInterval&&(d!==a&&!d.frameElement)&&(d=a);var h,i;f.handler&&(h=f,f=h.handler),f.guid||(f.guid=c.guid++);var j=c.data(d);if(!j)return;var k=j.events=j.events||{},l=j.handle,l;l||(j.handle=l=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(l.elem,arguments):b}),l.elem=d,e=e.split(" ");var m,n=0,o;while(m=e[n++]){i=h?c.extend({},h):{handler:f,data:g},m.indexOf(".")>-1?(o=m.split("."),m=o.shift(),i.namespace=o.slice(0).sort().join(".")):(o=[],i.namespace=""),i.type=m,i.guid=f.guid;var p=k[m],q=c.event.special[m]||{};if(!p){p=k[m]=[];if(!q.setup||q.setup.call(d,g,o,l)===false)d.addEventListener?d.addEventListener(m,l,false):d.attachEvent&&d.attachEvent("on"+m,l)}q.add&&(q.add.call(d,i),i.handler.guid||(i.handler.guid=f.guid)),p.push(i),c.event.global[m]=true}d=null},global:{},remove:function(a,b,d,e){if(a.nodeType===3||a.nodeType===8)return;var f,g,h,i=0,j,k,l,m,n,o,p,q=c.data(a),r=q&&q.events;if(!q||!r)return;b&&b.type&&(d=b.handler,b=b.type);if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(g in r)c.event.remove(a,g+b);return}b=b.split(" ");while(g=b[i++]){p=g,o=null,j=g.indexOf(".")<0,k=[],j||(k=g.split("."),g=k.shift(),l=new RegExp("(^|\\.)"+c.map(k.slice(0).sort(),M).join("\\.(?:.*\\.)?")+"(\\.|$)")),n=r[g];if(!n)continue;if(!d){for(var s=0;s<n.length;s++){o=n[s];if(j||l.test(o.namespace))c.event.remove(a,p,o.handler,s),n.splice(s--,1)}continue}m=c.event.special[g]||{};for(var s=e||0;s<n.length;s++){o=n[s];if(d.guid===o.guid){if(j||l.test(o.namespace))e==null&&n.splice(s--,1),m.remove&&m.remove.call(a,o);if(e!=null)break}}if(n.length===0||e!=null&&n.length===1)(!m.teardown||m.teardown.call(a,k)===false)&&N(a,g,q.handle),f=null,delete r[g]}if(c.isEmptyObject(r)){var t=q.handle;t&&(t.elem=null),delete q.events,delete q.handle,c.isEmptyObject(q)&&c.removeData(a)}},trigger:function(a,d,e){var f=a.type||a,g=arguments[3];if(!g){a=typeof a==="object"?a[A]?a:c.extend(c.Event(f),a):c.Event(f),f.indexOf("!")>=0&&(a.type=f=f.slice(0,-1),a.exclusive=true),e||(a.stopPropagation(),c.event.global[f]&&c.each(c.cache,function(){this.events&&this.events[f]&&c.event.trigger(a,d,this.handle.elem)}));if(!e||e.nodeType===3||e.nodeType===8)return b;a.result=b,a.target=e,d=c.makeArray(d),d.unshift(a)}a.currentTarget=e;var h=c.data(e,"handle");h&&h.apply(e,d);var i=e.parentNode||e.ownerDocument;try{e&&e.nodeName&&c.noData[e.nodeName.toLowerCase()]||e["on"+f]&&e["on"+f].apply(e,d)===false&&(a.result=false)}catch(a){}if(!a.isPropagationStopped()&&i)c.event.trigger(a,d,i,true);else if(!a.isDefaultPrevented()){var j=a.target,k,l=c.nodeName(j,"a")&&f==="click",m=c.event.special[f]||{};if((!m._default||m._default.call(e,a)===false)&&!l&&!(j&&j.nodeName&&c.noData[j.nodeName.toLowerCase()])){try{j[f]&&(k=j["on"+f],k&&(j["on"+f]=null),c.event.triggered=true,j[f]())}catch(a){}k&&(j["on"+f]=k),c.event.triggered=false}}},handle:function(d){var e,f,g,h,i;d=arguments[0]=c.event.fix(d||a.event),d.currentTarget=this,e=d.type.indexOf(".")<0&&!d.exclusive,e||(g=d.type.split("."),d.type=g.shift(),h=new RegExp("(^|\\.)"+g.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)"));var i=c.data(this,"events"),f=i[d.type];if(i&&f){f=f.slice(0);for(var j=0,k=f.length;j<k;j++){var l=f[j];if(e||h.test(l.namespace)){d.handler=l.handler,d.data=l.data,d.handleObj=l;var m=l.handler.apply(this,arguments);m!==b&&(d.result=m,m===false&&(d.preventDefault(),d.stopPropagation()));if(d.isImmediatePropagationStopped())break}}}return d.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[A])return a;var d=a;a=c.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||f),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=f.documentElement,i=f.body;a.pageX=a.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h&&h.clientLeft||i&&i.clientLeft||0),a.pageY=a.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h&&h.clientTop||i&&i.clientTop||0)}!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode)&&(a.which=a.charCode||a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:Y}))},remove:function(a){var b=true,d=a.origType.replace(L,"");c.each(c.data(this,"events").live||[],function(){if(d===this.origType.replace(L,"")){b=false;return false}}),b&&c.event.remove(this,a.origType,Y)}},beforeunload:{setup:function(a,b,c){this.setInterval&&(this.onbeforeunload=c);return false},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}};var N=f.removeEventListener?function(a,b,c){a.removeEventListener(b,c,false)}:function(a,b,c){a.detachEvent("on"+b,c)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type):this.type=a,this.timeStamp=z(),this[A]=true};function O(){return false}function P(){return true}c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var a=this.originalEvent;if(!a)return;a.preventDefault&&a.preventDefault(),a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=P;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P,this.stopPropagation()},isDefaultPrevented:O,isPropagationStopped:O,isImmediatePropagationStopped:O};var Q=function(a){var b=a.relatedTarget;try{while(b&&b!==this)b=b.parentNode;b!==this&&(a.type=a.data,c.event.handle.apply(this,arguments))}catch(a){}},R=function(a){a.type=a.data,c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?R:Q,a)},teardown:function(a){c.event.remove(this,b,a&&a.selector?R:Q)}}}),c.support.submitBubbles||(c.event.special.submit={setup:function(a,b){if(this.nodeName.toLowerCase()!=="form")c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return W("submit",this,arguments)}),c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return W("submit",this,arguments)});else return false},teardown:function(a){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var S=/textarea|input|select/i,T,U=function(a){var b=a.type,d=a.value;b==="radio"||b==="checkbox"?d=a.checked:b==="select-multiple"?d=a.selectedIndex>-1?c.map(a.options,function(a){return a.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(d=a.selectedIndex);return d},V=function V(a){var d=a.target,e,f;if(!S.test(d.nodeName)||d.readOnly)return;e=c.data(d,"_change_data"),f=U(d),(a.type!=="focusout"||d.type!=="radio")&&c.data(d,"_change_data",f);if(e===b||f===e)return;if(e!=null||f){a.type="change";return c.event.trigger(a,arguments[1],d)}};c.event.special.change={filters:{focusout:V,click:function(a){var b=a.target,c=b.type;if(c==="radio"||c==="checkbox"||b.nodeName.toLowerCase()==="select")return V.call(this,a)},keydown:function(a){var b=a.target,c=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")return V.call(this,a)},beforeactivate:function(a){var b=a.target;c.data(b,"_change_data",U(b))}},setup:function(a,b){if(this.type==="file")return false;for(var d in T)c.event.add(this,d+".specialChange",T[d]);return S.test(this.nodeName)},teardown:function(a){c.event.remove(this,".specialChange");return S.test(this.nodeName)}},T=c.event.special.change.filters}function W(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}f.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){c.event.special[b]={setup:function(){this.addEventListener(a,d,true)},teardown:function(){this.removeEventListener(a,d,true)}};function d(a){a=c.event.fix(a),a.type=b;return c.event.handle.call(this,a)}}),c.each(["bind","one"],function(a,d){c.fn[d]=function(a,e,f){if(typeof a==="object"){for(var g in a)this[d](g,e,a[g],f);return this}c.isFunction(e)&&(f=e,e=b);var h=d==="one"?c.proxy(f,function(a){c(this).unbind(a,h);return f.apply(this,arguments)}):f;if(a==="unload"&&d!=="one")this.one(a,e,f);else for(var i=0,j=this.length;i<j;i++)c.event.add(this[i],a,h,e);return this}}),c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else for(var e=0,f=this.length;e<f;e++)c.event.remove(this[e],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var d=c.Event(a);d.preventDefault(),d.stopPropagation(),c.event.trigger(d,b,this[0]);return d.result}},toggle:function(a){var b=arguments,d=1;while(d<b.length)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(e){var f=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,f+1),e.preventDefault();return b[f].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var X={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(a,e,f,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:c(this.context);c.isFunction(e)&&(f=e,e=b),a=(a||"").split(" ");while((h=a[i++])!=null){j=L.exec(h),k="",j&&(k=j[0],h=h.replace(L,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,h==="focus"||h==="blur"?(a.push(X[h]+k),h=h+k):h=(X[h]||h)+k,d==="live"?n.each(function(){c.event.add(this,Z(h,m),{data:e,selector:m,handler:f,origType:h,origHandler:f,preType:l})}):n.unbind(Z(h,m),f)}return this}});function Y(a){var b,d=[],e=[],f=arguments,g,h,i,j,k,l,m,n,o=c.data(this,"events");if(a.liveFired===this||!o||!o.live||a.button&&a.type==="click")return;a.liveFired=this;var p=o.live.slice(0);for(k=0;k<p.length;k++)i=p[k],i.origType.replace(L,"")===a.type?e.push(i.selector):p.splice(k--,1);h=c(a.target).closest(e,a.currentTarget);for(l=0,m=h.length;l<m;l++)for(k=0;k<p.length;k++){i=p[k];if(h[l].selector===i.selector){j=h[l].elem,g=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")g=c(a.relatedTarget).closest(i.selector)[0];(!g||g!==j)&&d.push({elem:j,handleObj:i})}}for(l=0,m=d.length;l<m;l++){h=d[l],a.currentTarget=h.elem,a.data=h.handleObj.data,a.handleObj=h.handleObj;if(h.handleObj.origHandler.apply(h.elem,f)===false){b=false;break}}return b}function Z(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,"&")}c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)},c.attrFn&&(c.attrFn[b]=true)}),a.attachEvent&&!a.addEventListener&&a.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(a){}}),function(){var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=false,h=true;[0,0].sort(function(){h=false;return 0});var i=function(b,c,d,g){d=d||[];var h=c=c||f;if(c.nodeType!==1&&c.nodeType!==9)return[];if(!b||typeof b!=="string")return d;var l=[],n,o,p,q,u=true,v=s(c),w=b;while((a.exec(""),n=a.exec(w))!==null){w=n[3],l.push(n[1]);if(n[2]){q=n[3];break}}if(l.length>1&&k.exec(b))if(l.length===2&&j.relative[l[0]])o=t(l[0]+l[1],c);else{o=j.relative[l[0]]?[c]:i(l.shift(),c);while(l.length)b=l.shift(),j.relative[b]&&(b+=l.shift()),o=t(b,o)}else{if(!g&&l.length>1&&c.nodeType===9&&!v&&j.match.ID.test(l[0])&&!j.match.ID.test(l[l.length-1])){var x=i.find(l.shift(),c,v);c=x.expr?i.filter(x.expr,x.set)[0]:x.set[0]}if(c){var x=g?{expr:l.pop(),set:m(g)}:i.find(l.pop(),l.length===1&&(l[0]==="~"||l[0]==="+")&&c.parentNode?c.parentNode:c,v);o=x.expr?i.filter(x.expr,x.set):x.set,l.length>0?p=m(o):u=false;while(l.length){var y=l.pop(),z=y;j.relative[y]?z=l.pop():y="",z==null&&(z=c),j.relative[y](p,z,v)}}else p=l=[]}p||(p=o),p||i.error(y||b);if(e.call(p)==="[object Array]")if(u)if(c&&c.nodeType===1)for(var A=0;p[A]!=null;A++)p[A]&&(p[A]===true||p[A].nodeType===1&&r(c,p[A]))&&d.push(o[A]);else for(var A=0;p[A]!=null;A++)p[A]&&p[A].nodeType===1&&d.push(o[A]);else d.push.apply(d,p);else m(p,d);q&&(i(q,h,d,g),i.uniqueSort(d));return d};i.uniqueSort=function(a){if(n){g=h,a.sort(n);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},i.matches=function(a,b){return i(a,null,null,b)},i.find=function(a,b,c){var d,e;if(!a)return[];for(var f=0,g=j.order.length;f<g;f++){var h=j.order[f],e;if(e=j.leftMatch[h].exec(a)){var i=e[1];e.splice(1,1);if(i.substr(i.length-1)!=="\\"){e[1]=(e[1]||"").replace(/\\/g,""),d=j.find[h](e,b,c);if(d!=null){a=a.replace(j.match[h],"");break}}}}d||(d=b.getElementsByTagName("*"));return{set:d,expr:a}},i.filter=function(a,c,d,e){var f=a,g=[],h=c,k,l,m=c&&c[0]&&s(c[0]);while(a&&c.length){for(var n in j.filter)if((k=j.leftMatch[n].exec(a))!=null&&k[2]){var o=j.filter[n],p,q,r=k[1];l=false,k.splice(1,1);if(r.substr(r.length-1)==="\\")continue;h===g&&(g=[]);if(j.preFilter[n]){k=j.preFilter[n](k,h,d,g,e,m);if(k){if(k===true)continue}else l=p=true}if(k)for(var t=0;(q=h[t])!=null;t++)if(q){p=o(q,k,t,h);var u=e^!!p;d&&p!=null?u?l=true:h[t]=false:u&&(g.push(q),l=true)}if(p!==b){d||(h=g),a=a.replace(j.match[n],"");if(!l)return[];break}}if(a===f)if(l==null)i.error(a);else break;f=a}return h},i.error=function(a){throw"Syntax error, unrecognized expression: "+a};var j=i.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||false:h===b}e&&i.filter(b,a,true)},">":function(a,b){var c=typeof b==="string";if(c&&!/\W/.test(b)){b=b.toLowerCase();for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f){var g=f.parentNode;a[d]=g.nodeName.toLowerCase()===b?g:false}}}else{for(var d=0,e=a.length;d<e;d++){var f=a[d];f&&(a[d]=c?f.parentNode:f.parentNode===b)}c&&i.filter(b,a,true)}},"":function(a,b,c){var e=d++,f=q;if(typeof b==="string"&&!/\W/.test(b)){var g=b=b.toLowerCase();f=p}f("parentNode",b,e,a,g,c)},"~":function(a,b,c){var e=d++,f=q;if(typeof b==="string"&&!/\W/.test(b)){var g=b=b.toLowerCase();f=p}f("previousSibling",b,e,a,g,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=false));return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");!f&&j.attrMap[g]&&(a[1]=j.attrMap[g]),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=i(b[3],null,null,c);else{var g=i.filter(b[3],c,d,true^f);d||e.push.apply(e,g);return false}else if(j.match.POS.test(b[0])||j.match.CHILD.test(b[0]))return true;return b},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===true},checked:function(a){return a.checked===true},selected:function(a){a.parentNode.selectedIndex;return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!i(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=j.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||o([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var c=0,h=g.length;c<h;c++)if(g[c]===a)return false;return true}i.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return false;if(c==="first")return true;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return false;return true;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return true;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=j.attrHandle[c]?j.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":false:e&&d!==false},POS:function(a,b,c,d){var e=b[2],f=j.setFilters[e];if(f)return f(a,c,b,d)}}},k=j.match.POS;for(var l in j.match)j.match[l]=new RegExp(j.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),j.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+j.match[l].source.replace(/\\(\d+)/g,function(a,b){return"\\"+(b-0+1)}));var m=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(f.documentElement.childNodes,0)[0].nodeType}catch(a){m=function(a,b){var c=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(c,a);else if(typeof a.length==="number")for(var d=0,f=a.length;d<f;d++)c.push(a[d]);else for(var d=0;a[d];d++)c.push(a[d]);return c}}var n;f.documentElement.compareDocumentPosition?n=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){a==b&&(g=true);return a.compareDocumentPosition?-1:1}var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;c===0&&(g=true);return c}:"sourceIndex"in f.documentElement?n=function(a,b){if(!a.sourceIndex||!b.sourceIndex){a==b&&(g=true);return a.sourceIndex?-1:1}var c=a.sourceIndex-b.sourceIndex;c===0&&(g=true);return c}:f.createRange&&(n=function(a,b){if(!a.ownerDocument||!b.ownerDocument){a==b&&(g=true);return a.ownerDocument?-1:1}var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);e===0&&(g=true);return e});function o(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=o(c.childNodes));return b}(function(){var a=f.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var d=f.documentElement;d.insertBefore(a,d.firstChild),f.getElementById(c)&&(j.find.ID=function(a,c,d){if(typeof c.getElementById!=="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},j.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null})(),function(){var a=f.createElement("div");a.appendChild(f.createComment("")),a.getElementsByTagName("*").length>0&&(j.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(j.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),f.querySelectorAll&&function(){var a=i,b=f.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;i=function(b,c,d,e){c=c||f;if(!e&&c.nodeType===9&&!s(c))try{return m(c.querySelectorAll(b),d)}catch(a){}return a(b,c,d,e)};for(var c in a)i[c]=a[c];b=null}(),function(){var a=f.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;j.order.splice(1,0,"CLASS"),j.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}();function p(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=false;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function q(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var j=d[g];if(j){j=j[a];var k=false;while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){f||(j.sizcache=c,j.sizset=g);if(typeof b!=="string"){if(j===b){k=true;break}}else if(i.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[g]=k}}}var r=f.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)},s=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":false},t=function(a,b){var c=[],d="",e,f=b.nodeType?[b]:b;while(e=j.match.PSEUDO.exec(a))d+=e[0],a=a.replace(j.match.PSEUDO,"");a=j.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)i(a,f[g],c);return i.filter(d,c)};c.find=i,c.expr=i.selectors,c.expr[":"]=c.expr.filters,c.unique=i.uniqueSort,c.text=o,c.isXMLDoc=s,c.contains=r;return}();var $=/Until$/,_=/^(?:parents|prevUntil|prevAll)/,ba=/,/,u=Array.prototype.slice,bb=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return c.grep(a,function(a,c){return a===b===d});if(typeof b==="string"){var e=c.grep(a,function(a){return a.nodeType===1});if(i.test(b))return c.filter(b,e,!d);b=c.filter(b,e)}return c.grep(a,function(a,e){return c.inArray(a,b)>=0===d})};c.fn.extend({find:function(a){var b=this.pushStack("","find",a),d=0;for(var e=0,f=this.length;e<f;e++){d=b.length,c.find(a,this[e],b);if(e>0)for(var g=d;g<b.length;g++)for(var h=0;h<d;h++)if(b[h]===b[g]){b.splice(g--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var a=0,d=b.length;a<d;a++)if(c.contains(this,b[a]))return true})},not:function(a){return this.pushStack(bb(this,a,false),"not",a)},filter:function(a){return this.pushStack(bb(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],e=this[0],f,g={},h;if(e&&a.length){for(var i=0,j=a.length;i<j;i++)h=a[i],g[h]||(g[h]=c.expr.match.POS.test(h)?c(h,b||this.context):h);while(e&&e.ownerDocument&&e!==b){for(h in g){f=g[h];if(f.jquery?f.index(e)>-1:c(e).is(f))d.push({selector:h,elem:e}),delete g[h]}e=e.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(d,e){while(e&&e.ownerDocument&&e!==b){if(k?k.index(e)>-1:c(e).is(a))return e;e=e.parentNode}return null})},index:function(a){if(!a||typeof a==="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?c(a,b||this.context):c.makeArray(a),e=c.merge(this.get(),d);return this.pushStack(bc(d[0])||bc(e[0])?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});function bc(a){return!a||!a.parentNode||a.parentNode.nodeType===11}c.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);$.test(a)||(e=d),e&&typeof e==="string"&&(f=c.filter(e,f)),f=this.length>1?c.unique(f):f,(this.length>1||ba.test(e))&&_.test(a)&&(f=f.reverse());return this.pushStack(f,a,u.call(arguments).join(","))}}),c.extend({filter:function(a,b,d){d&&(a=":not("+a+")");return c.find.matches(a,b)},dir:function(a,d,e){var f=[],g=a[d];while(g&&g.nodeType!==9&&(e===b||g.nodeType!==1||!c(g).is(e)))g.nodeType===1&&f.push(g),g=g[d];return f},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bd=/ jQuery\d+="(?:\d+|null)"/g,be=/^\s+/,bf=/(<([\w:]+)[^>]*?)\/>/g,bg=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,bh=/<([\w:]+)/,bi=/<tbody/i,bj=/<|&#?\w+;/,bk=/<script|<object|<embed|<option|<style/i,bl=/checked\s*(?:[^=]|=\s*.checked.)/i,bm=function(a,b,c){return bg.test(c)?a:b+"></"+c+">"},bn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bn.optgroup=bn.option,bn.tbody=bn.tfoot=bn.colgroup=bn.caption=bn.thead,bn.th=bn.td,c.support.htmlSerialize||(bn._default=[1,"div<div>","</div>"]),c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||f).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length)!b&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var a=this.outerHTML,b=this.ownerDocument;if(!a){var d=b.createElement("div");d.appendChild(this.cloneNode(true)),a=d.innerHTML}return c.clean([a.replace(bd,"").replace(/=([^="'>\s]+\/)>/g,"=\"$1\">").replace(be,"")],b)[0]}return this.cloneNode(true)});a===true&&(bo(this,b),bo(this.find("*"),b.find("*")));return b},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(bd,""):null;if(typeof a==="string"&&!bk.test(a)&&(c.support.leadingWhitespace||!be.test(a))&&!bn[(bh.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bf,bm);try{for(var d=0,e=this.length;d<e;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(b){this.empty().append(a)}}else c.isFunction(a)?this.each(function(b){var d=c(this),e=d.html();d.empty().append(function(){return a.call(this,b,e)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),e=d.html();d.replaceWith(a.call(this,b,e))});typeof a!=="string"&&(a=c(a).detach());return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove(),b?c(b).before(a):c(d).append(a)})}return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,d,e){var f,g,h=a[0],i=[],j,k;if(!c.support.checkClone&&arguments.length===3&&typeof h==="string"&&bl.test(h))return this.each(function(){c(this).domManip(a,d,e,true)});if(c.isFunction(h))return this.each(function(f){var g=c(this);a[0]=h.call(this,f,d?g.html():b),g.domManip(a,d,e)});if(this[0]){k=h&&h.parentNode,c.support.parentNode&&k&&k.nodeType===11&&k.childNodes.length===this.length?f={fragment:k}:f=bp(a,this,i),j=f.fragment,j.childNodes.length===1?g=j=j.firstChild:g=j.firstChild;if(g){d=d&&c.nodeName(g,"tr");for(var l=0,m=this.length;l<m;l++)e.call(d?n(this[l],g):this[l],l>0||f.cacheable||this.length>1?j.cloneNode(true):j)}i.length&&c.each(i,x)}return this;function n(a,b){return c.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}}});function bo(a,b){var d=0;b.each(function(){if(this.nodeName!==(a[d]&&a[d].nodeName))return;var b=c.data(a[d++]),e=c.data(this,b),f=b&&b.events;if(f){delete e.handle,e.events={};for(var g in f)for(var h in f[g])c.event.add(this,g,f[g][h],f[g][h].data)}})}function bp(a,b,d){var e,g,h,i=b&&b[0]?b[0].ownerDocument||b[0]:f;a.length===1&&typeof a[0]==="string"&&a[0].length<512&&i===f&&!bk.test(a[0])&&(c.support.checkClone||!bl.test(a[0]))&&(g=true,h=c.fragments[a[0]],h&&(h!==1&&(e=h))),e||(e=i.createDocumentFragment(),c.clean(a,i,e,d)),g&&(c.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}}c.fragments={},c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[],f=c(d),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&f.length===1){f[b](this[0]);return this}for(var h=0,i=f.length;h<i;h++){var j=(h>0?this.clone(true):this).get();c.fn[b].apply(c(f[h]),j),e=e.concat(j)}return this.pushStack(e,a,f.selector)}}),c.extend({clean:function(a,b,d,e){b=b||f,typeof b.createElement==="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||f);var g=[];for(var h=0,i;(i=a[h])!=null;h++){typeof i==="number"&&(i+="");if(!i)continue;if(typeof i==="string"&&!bj.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(bf,bm);var j=(bh.exec(i)||["",""])[1].toLowerCase(),k=bn[j]||bn._default,l=k[0],m=b.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!c.support.tbody){var n=bi.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(var p=o.length-1;p>=0;--p)c.nodeName(o[p],"tbody")&&!o[p].childNodes.length&&o[p].parentNode.removeChild(o[p])}!c.support.leadingWhitespace&&be.test(i)&&m.insertBefore(b.createTextNode(be.exec(i)[0]),m.firstChild),i=m.childNodes}i.nodeType?g.push(i):g=c.merge(g,i)}if(d)for(var h=0;g[h];h++)e&&c.nodeName(g[h],"script")&&(!g[h].type||g[h].type.toLowerCase()==="text/javascript")?e.push(g[h].parentNode?g[h].parentNode.removeChild(g[h]):g[h]):(g[h].nodeType===1&&g.splice.apply(g,[h+1,0].concat(c.makeArray(g[h].getElementsByTagName("script")))),d.appendChild(g[h]));return g},cleanData:function(a){var b,d,e=c.cache,f=c.event.special,g=c.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){d=i[c.expando];if(d){b=e[d];if(b.events)for(var j in b.events)f[j]?c.event.remove(i,j):N(i,j,b.handle);g?delete i[c.expando]:i.removeAttribute&&i.removeAttribute(c.expando),delete e[d]}}}});var bq=/z-?index|font-?weight|opacity|zoom|line-?height/i,br=/alpha\([^)]*\)/,bs=/opacity=([^)]*)/,bt=/float/i,bu=/-([a-z])/ig,bv=/([A-Z])/g,bw=/^-?\d+(?:px)?$/i,bx=/^-?\d/,by={position:"absolute",visibility:"hidden",display:"block"},bz=["Left","Right"],bA=["Top","Bottom"],bB=f.defaultView&&f.defaultView.getComputedStyle,bC=c.support.cssFloat?"cssFloat":"styleFloat",bD=function(a,b){return b.toUpperCase()};c.fn.css=function(a,d){return y(this,a,d,true,function(a,d,e){if(e===b)return c.curCSS(a,d);typeof e==="number"&&!bq.test(d)&&(e+="px"),c.style(a,d,e)})},c.extend({style:function(a,d,e){if(!a||a.nodeType===3||a.nodeType===8)return b;(d==="width"||d==="height")&&parseFloat(e)<0&&(e=b);var f=a.style||a,g=e!==b;if(!c.support.opacity&&d==="opacity"){if(g){f.zoom=1;var h=parseInt(e,10)+""==="NaN"?"":"alpha(opacity="+e*100+")",i=f.filter||c.curCSS(a,"filter")||"";f.filter=br.test(i)?i.replace(br,h):h}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(bs.exec(f.filter)[1])/100+"":""}bt.test(d)&&(d=bC),d=d.replace(bu,bD),g&&(f[d]=e);return f[d]},css:function(a,b,d,e){if(b==="width"||b==="height"){var f,g=by,h=b==="width"?bz:bA;function i(){f=b==="width"?a.offsetWidth:a.offsetHeight;if(e==="border")return;c.each(h,function(){e||(f-=parseFloat(c.curCSS(a,"padding"+this,true))||0),e==="margin"?f+=parseFloat(c.curCSS(a,"margin"+this,true))||0:f-=parseFloat(c.curCSS(a,"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,g,i);return Math.max(0,Math.round(f))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var e,f=a.style,g;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){e=bs.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return e===""?"1":e}bt.test(b)&&(b=bC);if(!d&&f&&f[b])e=f[b];else if(bB){bt.test(b)&&(b="float"),b=b.replace(bv,"-$1").toLowerCase();var h=a.ownerDocument.defaultView;if(!h)return null;var i=h.getComputedStyle(a,null);i&&(e=i.getPropertyValue(b)),b==="opacity"&&e===""&&(e="1")}else if(a.currentStyle){var j=b.replace(bu,bD);e=a.currentStyle[b]||a.currentStyle[j];if(!bw.test(e)&&bx.test(e)){var k=f.left,l=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,f.left=j==="fontSize"?"1em":e||0,e=f.pixelLeft+"px",f.left=k,a.runtimeStyle.left=l}}return e},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(var e in b)a.style[e]=d[e]}}),c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var b=a.offsetWidth,d=a.offsetHeight,e=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!e?true:b>0&&d>0&&!e?false:c.curCSS(a,"display")==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var bE=z(),bF=/<script(.|\s)*?\/script>/gi,bG=/select|textarea/i,bH=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,bI=/=\?(&|$)/,bJ=/\?/,bK=/(\?|&)_=.*?(&|$)/,bL=/^(\w+:)?\/\/([^\/?#]+)/,bM=/%20/g,bN=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!=="string")return bN.call(this,a);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";b&&(c.isFunction(b)?(d=b,b=null):typeof b==="object"&&(b=c.param(b,c.ajaxSettings.traditional),g="POST"));var h=this;c.ajax({url:a,type:g,dataType:"html",data:b,complete:function(a,b){(b==="success"||b==="notmodified")&&h.html(f?c("<div />").append(a.responseText.replace(bF,"")).find(f):a.responseText),d&&h.each(d,[a.responseText,b,a])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bG.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(a,c){return{name:b.name,value:a}}):{name:b.name,value:d}}).get()}}),c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(a){return this.bind(b,a)}}),c.extend({get:function(a,b,d,e){c.isFunction(b)&&(e=e||d,d=b,b=null);return c.ajax({type:"GET",url:a,data:b,success:d,dataType:e})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,e){c.isFunction(b)&&(e=e||d,d=b,b={});return c.ajax({type:"POST",url:a,data:b,success:d,dataType:e})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:a.XMLHttpRequest&&(a.location.protocol!=="file:"||!a.ActiveXObject)?function(){return new a.XMLHttpRequest}:function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(d){var e=c.extend(true,{},c.ajaxSettings,d),g,h,i,j=d&&d.context||e,k=e.type.toUpperCase();e.data&&e.processData&&typeof e.data!=="string"&&(e.data=c.param(e.data,e.traditional));if(e.dataType==="jsonp"){if(k==="GET")bI.test(e.url)||(e.url+=(bJ.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!bI.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}e.dataType==="json"&&(e.data&&bI.test(e.data)||bI.test(e.url))&&(g=e.jsonpCallback||"jsonp"+bE++,e.data&&(e.data=(e.data+"").replace(bI,"="+g+"$1")),e.url=e.url.replace(bI,"="+g+"$1"),e.dataType="script",a[g]=a[g]||function(c){i=c,w(),x(),a[g]=b;try{delete a[g]}catch(a){}p&&p.removeChild(q)}),e.dataType==="script"&&e.cache===null&&(e.cache=false);if(e.cache===false&&k==="GET"){var l=z(),m=e.url.replace(bK,"$1_="+l+"$2");e.url=m+(m===e.url?(bJ.test(e.url)?"&":"?")+"_="+l:"")}e.data&&k==="GET"&&(e.url+=(bJ.test(e.url)?"&":"?")+e.data),e.global&&!(c.active++)&&c.event.trigger("ajaxStart");var n=bL.exec(e.url),o=n&&(n[1]&&n[1]!==location.protocol||n[2]!==location.host);if(e.dataType==="script"&&k==="GET"&&o){var p=f.getElementsByTagName("head")[0]||f.documentElement,q=f.createElement("script");q.src=e.url,e.scriptCharset&&(q.charset=e.scriptCharset);if(!g){var r=false;q.onload=q.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=true,w(),x(),q.onload=q.onreadystatechange=null,p&&q.parentNode&&p.removeChild(q))}}p.insertBefore(q,p.firstChild);return b}var s=false,t=e.xhr();if(!t)return;e.username?t.open(k,e.url,e.async,e.username,e.password):t.open(k,e.url,e.async);try{(e.data||d&&d.contentType)&&t.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(c.lastModified[e.url]&&t.setRequestHeader("If-Modified-Since",c.lastModified[e.url]),c.etag[e.url]&&t.setRequestHeader("If-None-Match",c.etag[e.url])),o||t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(a){}if(e.beforeSend&&e.beforeSend.call(j,t,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop"),t.abort();return false}e.global&&y("ajaxSend",[t,e]);var u=t.onreadystatechange=function(a){if(!t||t.readyState===0||a==="abort")s||x(),s=true,t&&(t.onreadystatechange=c.noop);else if(!s&&t&&(t.readyState===4||a==="timeout")){s=true,t.onreadystatechange=c.noop,h=a==="timeout"?"timeout":c.httpSuccess(t)?e.ifModified&&c.httpNotModified(t,e.url)?"notmodified":"success":"error";var b;if(h==="success")try{i=c.httpData(t,e.dataType,e)}catch(a){h="parsererror",b=a}h==="success"||h==="notmodified"?g||w():c.handleError(e,t,h,b),x(),a==="timeout"&&t.abort(),e.async&&(t=null)}};try{var v=t.abort;t.abort=function(){t&&v.call(t),u("abort")}}catch(a){}e.async&&e.timeout>0&&setTimeout(function(){t&&!s&&u("timeout")},e.timeout);try{t.send(k==="POST"||k==="PUT"||k==="DELETE"?e.data:null)}catch(a){c.handleError(e,t,null,a),x()}e.async||u();function w(){e.success&&e.success.call(j,i,h,t),e.global&&y("ajaxSuccess",[t,e])}function x(){e.complete&&e.complete.call(j,t,h),e.global&&y("ajaxComplete",[t,e]),e.global&&!--c.active&&c.event.trigger("ajaxStop")}function y(a,b){(e.context?c(e.context):c.event).trigger(a,b)}return t},handleError:function(a,b,d,e){a.error&&a.error.call(a.context||a,b,d,e),a.global&&(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,e])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0}catch(a){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),e=a.getResponseHeader("Etag");d&&(c.lastModified[b]=d),e&&(c.etag[b]=e);return a.status===304||a.status===0},httpData:function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&e.indexOf("xml")>=0,g=f?a.responseXML:a.responseText;f&&g.documentElement.nodeName==="parsererror"&&c.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,b)),typeof g==="string"&&(b==="json"||!b&&e.indexOf("json")>=0?g=c.parseJSON(g):(b==="script"||!b&&e.indexOf("javascript")>=0)&&c.globalEval(g));return g},param:function(a,d){var e=[];d===b&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery)c.each(a,function(){h(this.name,this.value)});else for(var f in a)g(f,a[f]);return e.join("&").replace(bM,"+");function g(a,b){c.isArray(b)?c.each(b,function(b,e){d||/\[\]$/.test(a)?h(a,e):g(a+"["+(typeof e==="object"||c.isArray(e)?b:"")+"]",e)}):!d&&b!=null&&typeof b==="object"?c.each(b,function(b,c){g(a+"["+b+"]",c)}):h(a,b)}function h(a,b){b=c.isFunction(b)?b():b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)}}});var bO={},bP=/toggle|show|hide/,bQ=/^([+-]=)?([\d+-.]+)(.*)$/,bR,bS=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(bT("show",3),a,b);for(var d=0,e=this.length;d<e;d++){var f=c.data(this[d],"olddisplay");this[d].style.display=f||"";if(c.css(this[d],"display")==="none"){var g=this[d].nodeName,h;if(bO[g])h=bO[g];else{var i=c("<"+g+" />").appendTo("body");h=i.css("display"),h==="none"&&(h="block"),i.remove(),bO[g]=h}c.data(this[d],"olddisplay",h)}}for(var j=0,k=this.length;j<k;j++)this[j].style.display=c.data(this[j],"olddisplay")||"";return this},hide:function(a,b){if(a||a===0)return this.animate(bT("hide",3),a,b);for(var d=0,e=this.length;d<e;d++){var f=c.data(this[d],"olddisplay");!f&&f!=="none"&&c.data(this[d],"olddisplay",c.css(this[d],"display"))}for(var g=0,h=this.length;g<h;g++)this[g].style.display="none";return this},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";c.isFunction(a)&&c.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:c(this).is(":hidden");c(this)[b?"show":"hide"]()}):this.animate(bT("toggle",3),a,b);return this},fadeTo:function(a,b,c){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c)},animate:function(a,b,d,e){var f=c.speed(b,d,e);if(c.isEmptyObject(a))return this.each(f.complete);return this[f.queue===false?"each":"queue"](function(){var b=c.extend({},f),d,e=this.nodeType===1&&c(this).is(":hidden"),g=this;for(d in a){var h=d.replace(bu,bD);d!==h&&(a[h]=a[d],delete a[d],d=h);if(a[d]==="hide"&&e||a[d]==="show"&&!e)return b.complete.call(this);(d==="height"||d==="width")&&this.style&&(b.display=c.css(this,"display"),b.overflow=this.style.overflow),c.isArray(a[d])&&((b.specialEasing=b.specialEasing||{})[d]=a[d][1],a[d]=a[d][0])}b.overflow!=null&&(this.style.overflow="hidden"),b.curAnim=c.extend({},a),c.each(a,function(d,f){var h=new c.fx(g,b,d);if(bP.test(f))h[f==="toggle"?e?"show":"hide":f](a);else{var i=bQ.exec(f),j=h.cur(true)||0;if(i){var k=parseFloat(i[2]),l=i[3]||"px";l!=="px"&&(g.style[d]=(k||1)+l,j=(k||1)/h.cur(true)*j,g.style[d]=j+l),i[1]&&(k=(i[1]==="-="?-1:1)*k+j),h.custom(j,k,l)}else h.custom(j,f,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]),this.each(function(){for(var a=d.length-1;a>=0;a--)d[a].elem===this&&(b&&d[a](true),d.splice(a,1))}),b||this.dequeue();return this}}),c.each({slideDown:bT("show",1),slideUp:bT("hide",1),slideToggle:bT("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(a,c){return this.animate(b,a,c)}}),c.extend({speed:function(a,b,d){var e=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};e.duration=c.fx.off?0:typeof e.duration==="number"?e.duration:c.fx.speeds[e.duration]||c.fx.speeds._default,e.old=e.complete,e.complete=function(){e.queue!==false&&c(this).dequeue(),c.isFunction(e.old)&&e.old.call(this)};return e},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(c.fx.step[this.prop]||c.fx.step._default)(this),(this.prop==="height"||this.prop==="width")&&this.elem.style&&(this.elem.style.display="block")},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var b=parseFloat(c.css(this.elem,this.prop,a));return b&&b>-1e4?b:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){this.startTime=z(),this.start=a,this.end=b,this.unit=d||this.unit||"px",this.now=this.start,this.pos=this.state=0;var e=this;function f(a){return e.step(a)}f.elem=this.elem,f()&&c.timers.push(f)&&!bR&&(bR=setInterval(c.fx.tick,13))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop),this.options.show=true,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop),this.options.hide=true,this.custom(this.cur(),0)},step:function(a){var b=z(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=true;for(var e in this.options.curAnim)this.options.curAnim[e]!==true&&(d=false);if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;var f=c.data(this.elem,"olddisplay");this.elem.style.display=f?f:this.options.display,c.css(this.elem,"display")==="none"&&(this.elem.style.display="block")}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var g in this.options.curAnim)c.style(this.elem,g,this.options.orig[g]);this.options.complete.call(this.elem)}return false}var h=b-this.startTime;this.state=h/this.options.duration;var i=this.options.specialEasing&&this.options.specialEasing[this.prop],j=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[i||j](this.state,h,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update();return true}},c.extend(c.fx,{tick:function(){var a=c.timers;for(var b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||c.fx.stop()},stop:function(){clearInterval(bR),bR=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length});function bT(a,b){var d={};c.each(bS.concat.apply([],bS.slice(0,b)),function(){d[this]=a});return d}"getBoundingClientRect"in f.documentElement?c.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){c.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),e=b.ownerDocument,f=e.body,g=e.documentElement,h=g.clientTop||f.clientTop||0,i=g.clientLeft||f.clientLeft||0,j=d.top+(self.pageYOffset||c.support.boxModel&&g.scrollTop||f.scrollTop)-h,k=d.left+(self.pageXOffset||c.support.boxModel&&g.scrollLeft||f.scrollLeft)-i;return{top:j,left:k}}:c.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){c.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,e=b,f=b.ownerDocument,g,h=f.documentElement,i=f.body,j=f.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(c.offset.supportsFixedPosition&&k.position==="fixed")break;g=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))&&(l+=parseFloat(g.borderTopWidth)||0,m+=parseFloat(g.borderLeftWidth)||0),e=d,d=b.offsetParent),c.offset.subtractsBorderForOverflowNotVisible&&g.overflow!=="visible"&&(l+=parseFloat(g.borderTopWidth)||0,m+=parseFloat(g.borderLeftWidth)||0),k=g}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;c.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},c.offset={initialize:function(){var a=f.body,b=f.createElement("div"),d,e,g,h,i=parseFloat(c.curCSS(a,"marginTop",true))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),a=b=d=e=g=h=null,c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize(),c.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(c.curCSS(a,"marginTop",true))||0,d+=parseFloat(c.curCSS(a,"marginLeft",true))||0);return{top:b,left:d}},setOffset:function(a,b,d){/static/.test(c.curCSS(a,"position"))&&(a.style.position="relative");var e=c(a),f=e.offset(),g=parseInt(c.curCSS(a,"top",true),10)||0,h=parseInt(c.curCSS(a,"left",true),10)||0;c.isFunction(b)&&(b=b.call(a,d,f));var i={top:b.top-f.top+g,left:b.left-f.left+h};"using"in b?b.using.call(a,i):e.css(i)}},c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0,d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0,e.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0,e.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||f.body;while(a&&(!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static"))a=a.offsetParent;return a})}}),c.each(["Left","Top"],function(a,d){var e="scroll"+d;c.fn[e]=function(d){var f=this[0],g;if(!f)return null;if(d!==b)return this.each(function(){g=bU(this),g?g.scrollTo(a?c(g).scrollLeft():d,a?d:c(g).scrollTop()):this[e]=d});g=bU(f);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]}});function bU(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}c.each(["Height","Width"],function(a,d){var e=d.toLowerCase();c.fn["inner"+d]=function(){return this[0]?c.css(this[0],e,false,"padding"):null},c.fn["outer"+d]=function(a){return this[0]?c.css(this[0],e,false,a?"margin":"border"):null},c.fn[e]=function(a){var f=this[0];if(!f)return a==null?null:this;if(c.isFunction(a))return this.each(function(b){var d=c(this);d[e](a.call(this,b,d[e]()))});return"scrollTo"in f&&f.document?f.document.compatMode==="CSS1Compat"&&f.document.documentElement["client"+d]||f.document.body["client"+d]:f.nodeType===9?Math.max(f.documentElement["client"+d],f.body["scroll"+d],f.documentElement["scroll"+d],f.body["offset"+d],f.documentElement["offset"+d]):a===b?c.css(f,e):this.css(e,typeof a==="string"?a:a+"px")}}),a.jQuery=a.$=c}(window),function(a,b){a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.5",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"));if(!isNaN(f)&&f!=0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function h(b,c,d,f){a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,true))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",true))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,true))||0)});return c}a.fn["inner"+d]=function(c){if(c===b)return g["inner"+d].call(this);return this.each(function(){a.style(this,f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){if(typeof b!=="number")return g["outer"+d].call(this,b);return this.each(function(){a.style(this,f,h(this,b,true,c)+"px")})}});function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var d=b.nodeName.toLowerCase(),e=a.attr(b,"tabindex");if("area"===d){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map")return false;h=a("img[usemap=#"+g+"]")[0];return!!h&&c(h)}return(/input|select|textarea|button|object/.test(d)?!b.disabled:"a"==d?b.href||!isNaN(e):!isNaN(e))&&c(b)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}}),a(function(){var b=document.createElement("div"),c=document.body;a.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.appendChild(b).offsetHeight===100,c.removeChild(b).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=false;if(b[d]>0)return true;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)a(e).triggerHandler("remove");c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(true,{},g.options),a[e][b].prototype=a.extend(true,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e==="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[true,e].concat(g)):e;if(f&&e.substring(0,1)==="_")return h;f?this.each(function(){var d=a.data(this,c);if(!d)throw"cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+e+"'";if(!a.isFunction(d[e]))throw"no such method '"+e+"' for "+c+" widget instance";var f=d[e].apply(d,g);if(f!==d&&f!==b){h=f;return false}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(c)[this.widgetName],b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c,f=this;if(arguments.length===0)return a.extend({},f.options);if(typeof c==="string"){if(d===b)return this.options[c];e={},e[c]=d}a.each(e,function(a,b){f._setOption(a,b)});return f},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var f=a.event.props.length,g;f;)g=a.event.props[--f],c[g]=c.originalEvent[g];this.element.trigger(c,d);return!(a.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}}(jQuery),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return f.apply(this,arguments);b=a.extend({},b);var g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0],k,l,m;h.nodeType===9?(k=g.width(),l=g.height(),m={top:0,left:0}):h.scrollTo&&h.document?(k=g.width(),l=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(b.at="left top",k=l=0,m={top:b.of.pageY,left:b.of.pageX}):(k=g.outerWidth(),l=g.outerHeight(),m=g.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),i.length===1&&(i[1]=i[0]),j[0]=parseInt(j[0],10)||0,j.length===1&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,b.at[0]==="right"?m.left+=k:b.at[0]===e&&(m.left+=k/2),b.at[1]==="bottom"?m.top+=l:b.at[1]===e&&(m.top+=l/2),m.left+=j[0],m.top+=j[1];return this.each(function(){var c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",true))||0,h=parseInt(a.curCSS(this,"marginTop",true))||0,n=d+g+parseInt(a.curCSS(this,"marginRight",true))||0,o=f+h+parseInt(a.curCSS(this,"marginBottom",true))||0,p=a.extend({},m),q;b.my[0]==="right"?p.left-=d:b.my[0]===e&&(p.left-=d/2),b.my[1]==="bottom"?p.top-=f:b.my[1]===e&&(p.top-=f/2),p.left=parseInt(p.left),p.top=parseInt(p.top),q={left:p.left-g,top:p.top-h},a.each(["left","top"],function(c,e){a.ui.position[i[c]]&&a.ui.position[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",true),10)||0,g=parseInt(a.curCSS(b,"left",true),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return g.call(this)})}(jQuery),function(a,b){var c,d="ui-button ui-widget ui-state-default ui-corner-all",e="ui-state-hover ui-state-active ",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",g=function(b){a(":ui-button",b.target.form).each(function(){var b=a(this).data("button");setTimeout(function(){b.refresh()},1)})},h=function(b){var c=b.name,d=b.form,e=a([]);c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",g),typeof this.options.disabled!=="boolean"&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,e=this.options,f=this.type==="checkbox"||this.type==="radio",i="ui-state-hover"+(f?"":" ui-state-active"),j="ui-state-focus";e.label===null&&(e.label=this.buttonElement.html()),this.element.is(":disabled")&&(e.disabled=true),this.buttonElement.addClass(d).attr("role","button").bind("mouseenter.button",function(){if(e.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(e.disabled)return;a(this).removeClass(i)}).bind("focus.button",function(){a(this).addClass(j)}).bind("blur.button",function(){a(this).removeClass(j)}),f&&this.element.bind("change.button",function(){b.refresh()}),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(e.disabled)return false;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(e.disabled)return false;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed",true);var c=b.element[0];h(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)}):(this.buttonElement.bind("mousedown.button",function(){if(e.disabled)return false;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(e.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(e.disabled)return false;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",e.disabled)},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]"),this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(d+" "+e+" "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="disabled"&&(c?this.element.attr("disabled",true):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(f),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary;d.primary||d.secondary?(b.addClass("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(b.addClass(e?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary"),this.hasTitle||b.attr("title",c))):b.addClass("ui-button-text-only")}}),a.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset"),this._init()},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":visible").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ";a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!=="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(false,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a("<a href=\"#\"></a>").addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){b.close(a);return false}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=false,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(b){var c=this,d;if(false===c._trigger("beforeClose",b))return;c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=false,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(d=Math.max(d,a(this).css("z-index")))}),a.ui.dialog.maxZ=d);return c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;if(e.modal&&!b||!e.stack&&!e.modal)return d._trigger("focus",c);e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c);return d},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;b.overlay=c.modal?new a.ui.dialog.overlay(b):null,d.next().length&&d.appendTo("body"),b._size(),b._position(c.position),d.show(c.show),b.moveToTop(true),c.modal&&d.bind("keypress.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey){d.focus(1);return false}if(b.target===d[0]&&b.shiftKey){e.focus(1);return false}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=true,b._trigger("open");return b},_createButtons:function(b){var c=this,d=false,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b==="object"&&b!==null&&a.each(b,function(){return!(d=true)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a("<button></button>",d).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){var b=this,c=b.options,d=a(document),e;function f(a){return{position:a.position,offset:a.offset}}b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c==="string"?c:"n,e,s,w,se,sw,ne,nw";function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b==="string"||typeof b==="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(b),e||this.uiDialog.hide()},_setOption:function(b,d){var e=this,f=e.uiDialog,g=f.is(":data(resizable)"),h=false;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d),h=true;break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":d?e._makeDraggable():f.draggable("destroy");break;case"height":h=true;break;case"maxHeight":g&&f.resizable("option","maxHeight",d),h=true;break;case"maxWidth":g&&f.resizable("option","maxWidth",d),h=true;break;case"minHeight":g&&f.resizable("option","minHeight",d),h=true;break;case"minWidth":g&&f.resizable("option","minWidth",d),h=true;break;case"position":e._position(d);break;case"resizable":g&&!d&&f.resizable("destroy"),g&&typeof d==="string"&&f.resizable("option","handles",d),!g&&d!==false&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"));break;case"width":h=true}a.Widget.prototype._setOption.apply(e,arguments),h&&e._size()},_size:function(){var b=this.options,c;this.element.css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),this.element.css(b.height==="auto"?{minHeight:Math.max(b.minHeight-c,0),height:a.support.minHeight?"auto":Math.max(b.minHeight-c,0)}:{minHeight:0,height:Math.max(b.height-c,0)}).show(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.5",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");b||(this.uuid+=1,b=this.uuid);return"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe(),this.instances.push(c);return c},destroy:function(b){this.oldInstances.push(this.instances.splice(a.inArray(b,this.instances),1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var c=0;a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))}),this.maxZ=c},height:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<c?a(window).height()+"px":b+"px"}return a(document).height()+"px"},width:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<c?a(window).width()+"px":b+"px"}return a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a,b){var c=0,d=0;function e(){return++c}function f(){return++d}a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d._sanitizeSelector(g));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=a("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",true)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash){e.selected=a;return false}}),typeof e.selected!=="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(this.panels.eq(e.selected).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.panels[e.selected]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===false&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=a(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===false){this.blur();return false}e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected")){e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur();return false}if(!f.length){e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur();return false}}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]")));return a},destroy:function(){var b=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie);return this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=a("#"+i);j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",true)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]));return this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+".tabs");return this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){a(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",true),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(a){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(a){}}})),c.element.dequeue("tabs");return this},abort:function(){this.element.queue([]),this.panels.stop(false,true),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup();return this},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.5"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)});a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0},min:0,max:100,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===b)return this._value();this._setOption("value",a);return this},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._trigger("change")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;typeof a!=="number"&&(a=0);return Math.min(this.max,Math.max(this.min,a))},_refreshValue:function(){var a=this.value();this.valueDiv.toggleClass("ui-corner-right",a===this.max).width(a+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.5"})}(jQuery),jQuery.cookie=function(a,b,c){if(typeof b!="undefined"){c=c||{},b===null&&(b="",c.expires=-1);var d="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){var e;typeof c.expires=="number"?(e=new Date,e.setTime(e.getTime()+c.expires*24*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}else{var i=null;if(document.cookie&&document.cookie!=""){var j=document.cookie.split(";");for(var k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}}return i}},require.module("bolo/client/index",function(a,b,c){(function(){var b,d;b=c("./world/local"),d=c("./world/client"),location.search==="?local"||location.hostname.split(".")[1]==="github"?a.exports=b:a.exports=d}).call(this)}),require.module("bolo/client/world/local",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};e=c("villain/world/net/local"),g=c("../../world_map"),d=c("../everard"),h=c("../../objects/all"),f=c("../../objects/tank"),i=c("../base64").decodeBase64,j=c("../../helpers"),b=function(){function a(){return e.apply(this,arguments)}return a}(),k(b,e),b.prototype.authority=true,b.prototype.loaded=function(a){this.map=g.load(i(d)),this.commonInitialization(),this.spawnMapObjects(),this.player=this.spawn(f,0),this.renderer.initHud(),a.destroy();return this.loop.start()},b.prototype.tick=function(){b.__super__.tick.apply(this,arguments);if(this.increasingRange!==this.decreasingRange){if(++this.rangeAdjustTimer===6){this.increasingRange?this.player.increaseRange():this.player.decreaseRange();return this.rangeAdjustTimer=0}}else return this.rangeAdjustTimer=0},b.prototype.soundEffect=function(a,b,c,d){return this.renderer.playSound(a,b,c,d)},b.prototype.mapChanged=function(a,b,c,d){},b.prototype.handleKeydown=function(a){switch(a.which){case 32:return this.player.shooting=true;case 37:return this.player.turningCounterClockwise=true;case 38:return this.player.accelerating=true;case 39:return this.player.turningClockwise=true;case 40:return this.player.braking=true}},b.prototype.handleKeyup=function(a){switch(a.which){case 32:return this.player.shooting=false;case 37:return this.player.turningCounterClockwise=false;case 38:return this.player.accelerating=false;case 39:return this.player.turningClockwise=false;case 40:return this.player.braking=false}},b.prototype.buildOrder=function(a,b,c){return this.player.builder.$.performOrder(a,b,c)},j.extend(b.prototype,c("./mixin")),h.registerWithWorld(b.prototype),a.exports=b}).call(this)}),require.module("villain/world/net/local",function(a,b,c){(function(){var b,d,e=Array.prototype.slice,f=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};b=c("../base"),d=function(){return function a(){return b.apply(this,arguments)}}(),f(d,b),d.prototype.spawn=function(a){var b,c;b=e.call(arguments,1),c=this.insert(new a(this)),c.spawn.apply(c,b),c.anySpawn();return c},d.prototype.update=function(a){a.update(),a.emit("update"),a.emit("anyUpdate");return a},d.prototype.destroy=function(a){a.destroy(),a.emit("destroy"),a.emit("finalize"),this.remove(a);return a},a.exports=d}).call(this)}),require.module("villain/world/base",function(a,b,c){(function(){var b,c=Array.prototype.slice;b=function(){return function a(){this.objects=[];return this}}(),b.prototype.tick=function(){var a,b,c,d;c=this.objects.slice(0);for(a=0,b=c.length;a<b;a++)d=c[a],this.update(d);return null},b.prototype.insert=function(a){var b,c,d,e;c=this.objects;for(d=0,b=c.length;d<b;d++){e=c[d];if(a.updatePriority>e.updatePriority)break}this.objects.splice(d,0,a),c=this.objects.length;for(d=d;d<=c?d<c:d>c;d<=c?d+=1:d-=1)this.objects[d].idx=d;return a},b.prototype.remove=function(a){var b,c,d;this.objects.splice(a.idx,1),b=a.idx,c=this.objects.length;for(d=b;b<=c?d<c:d>c;b<=c?d+=1:d-=1)this.objects[d].idx=d;a.idx=null;return a},b.prototype.registerType=function(a){},b.prototype.spawn=function(a){var b;b=c.call(arguments,1)},b.prototype.update=function(a){},b.prototype.destroy=function(a){},a.exports=b}).call(this)}),require.module("bolo/world_map",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=Object.prototype.hasOwnProperty,v=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};s=Math.round,r=Math.random,p=Math.floor,m=c("./constants"),h=m.TILE_SIZE_WORLD,g=m.TILE_SIZE_PIXELS,n=c("./map"),d=n.Map,e=n.TERRAIN_TYPES,q=c("./net"),t=c("./sounds"),l=c("./objects/world_pillbox"),i=c("./objects/world_base"),b=c("./objects/flood_fill"),f={"|":{tankSpeed:0,tankTurn:0,manSpeed:0}," ":{tankSpeed:3,tankTurn:.25,manSpeed:0},"~":{tankSpeed:3,tankTurn:.25,manSpeed:4},"%":{tankSpeed:3,tankTurn:.25,manSpeed:4},"=":{tankSpeed:16,tankTurn:1,manSpeed:16},"#":{tankSpeed:6,tankTurn:.5,manSpeed:8},":":{tankSpeed:3,tankTurn:.25,manSpeed:4},".":{tankSpeed:12,tankTurn:1,manSpeed:16},"}":{tankSpeed:0,tankTurn:0,manSpeed:0},b:{tankSpeed:16,tankTurn:1,manSpeed:16},"^":{tankSpeed:3,tankTurn:.5,manSpeed:0}},o=function(){var a,b,c,d,g,h,i,j;b=[];for(d in a=f){if(!u.call(a,d))continue;g=a[d],b.push(function(){i=e[d],c=[];for(h in g){if(!u.call(g,h))continue;j=g[h],c.push(i[h]=j)}return c}())}return b},o(),k=function(){function a(b,c,d){a.__super__.constructor.apply(this,arguments),this.life=0;return this}return a}(),v(k,d.prototype.CellClass),k.prototype.isObstacle=function(){var a;return((a=this.pill)!=null?a.armour:undefined)>0||this.type.tankSpeed===0},k.prototype.hasTankOnBoat=function(){var a,b,c,d;for(a=0,b=(c=this.map.world.tanks).length;a<b;a++){d=c[a];if(d.armour!==255&&d.cell===this)if(d.onBoat)return true}return false},k.prototype.getTankSpeed=function(a){var b,c;if(((b=this.pill)!=null?b.armour:undefined)>0)return 0;if((c=this.base)!=null?c.owner:undefined)if(!(this.base.owner.$.isAlly(a)||this.base.armour<=9))return 0;if(a.onBoat&&this.isType("^"," "))return 16;return this.type.tankSpeed},k.prototype.getTankTurn=function(a){var b,c;if(((b=this.pill)!=null?b.armour:undefined)>0)return 0;if((c=this.base)!=null?c.owner:undefined)if(!(this.base.owner.$.isAlly(a)||this.base.armour<=9))return 0;if(a.onBoat&&this.isType("^"," "))return 1;return this.type.tankTurn},k.prototype.getManSpeed=function(a){var b,c,d;d=a.owner.$;if(((b=this.pill)!=null?b.armour:undefined)>0)return 0;if(((c=this.base)!=null?c.owner:undefined)!=null)if(!(this.base.owner.$.isAlly(d)||this.base.armour<=9))return 0;return this.type.manSpeed},k.prototype.getPixelCoordinates=function(){return[(this.x+.5)*g,(this.y+.5)*g]},k.prototype.getWorldCoordinates=function(){return[(this.x+.5)*h,(this.y+.5)*h]},k.prototype.setType=function(a,b,c){var d,e,f,g,h;d=[this.type,this.mine,this.life],h=d[0],f=d[1],g=d[2],k.__super__.setType.apply(this,arguments),this.life=function(){switch(this.type.ascii){case".":return 5;case"}":return 5;case":":return 5;case"~":return 4;default:return 0}}.call(this);return(e=this.map.world)!=null?e.mapChanged(this,h,f,g):undefined},k.prototype.takeShellHit=function(a){var c,d,e,f,g;g=t.SHOT_BUILDING,this.isType(".","}",":","~")?--this.life===0?(f=function(){switch(this.type.ascii){case".":return"~";case"}":return":";case":":return" ";case"~":return" "}}.call(this),this.setType(f)):(c=this.map.world)!=null?c.mapChanged(this,this.type,this.mine):undefined:this.isType("#")?(this.setType("."),g=t.SHOT_TREE):this.isType("=")?(e=a.direction>=224||a.direction<32?this.neigh(1,0):a.direction>=32&&a.direction<96?this.neigh(0,-1):a.direction>=96&&a.direction<160?this.neigh(-1,0):this.neigh(0,1),e.isType(" ","^")&&this.setType(" ")):(f=function(){switch(this.type.ascii){case"|":return"}";case"b":return" "}}.call(this),this.setType(f)),this.isType(" ")&&((d=this.map.world)!=null?d.spawn(b,this):undefined);return g},k.prototype.takeExplosionHit=function(){var a;if(this.pill!=null)return this.pill.takeExplosionHit();if(this.isType("b"))this.setType(" ");else{if(this.isType(" ","^","b"))return;this.setType("%")}return(a=this.map.world)!=null?a.spawn(b,this):undefined},j=function(){function a(){return d.apply(this,arguments)}return a}(),v(j,d),j.prototype.CellClass=k,j.prototype.PillboxClass=l,j.prototype.BaseClass=i,j.prototype.cellAtPixel=function(a,b){return this.cellAtTile(p(a/g),p(b/g))},j.prototype.cellAtWorld=function(a,b){return this.cellAtTile(p(a/h),p(b/h))},j.prototype.getRandomStart=function(){return this.starts[s(r()*(this.starts.length-1))]},a.exports=j}).call(this)}),require.module("bolo/constants",function(a,b,c){(function(){b.PIXEL_SIZE_WORLD=8,b.TILE_SIZE_PIXELS=32,b.TILE_SIZE_WORLD=b.TILE_SIZE_PIXELS*b.PIXEL_SIZE_WORLD,b.MAP_SIZE_TILES=256,b.MAP_SIZE_PIXELS=b.MAP_SIZE_TILES*b.TILE_SIZE_PIXELS,b.MAP_SIZE_WORLD=b.MAP_SIZE_TILES*b.TILE_SIZE_WORLD,b.TICK_LENGTH_MS=20}).call(this)}),require.module("bolo/map",function(a,b,c){(function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p=function(a,b){return function(){return a.apply(b,arguments)}},q=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};o=Math.round,m=Math.floor,n=Math.min,d=c("./constants").MAP_SIZE_TILES,k=[{ascii:"|",description:"building"},{ascii:" ",description:"river"},{ascii:"~",description:"swamp"},{ascii:"%",description:"crater"},{ascii:"=",description:"road"},{ascii:"#",description:"forest"},{ascii:":",description:"rubble"},{ascii:".",description:"grass"},{ascii:"}",description:"shot building"},{ascii:"b",description:"river with boat"},{ascii:"^",description:"deep sea"}],l=function(){var a,b,c,d,e;d=[];for(a=0,b=(c=k).length;a<b;a++)e=c[a],d.push(k[e.ascii]=e);return d},l(),f=function(){function a(a,b,c){this.y=c,this.x=b,this.map=a,this.type=k["^"],this.mine=this.isEdgeCell(),this.idx=this.y*d+this.x;return this}return a}(),f.prototype.neigh=function(a,b){return this.map.cellAtTile(this.x+a,this.y+b)},f.prototype.isType=function(){var a,b,c;for(b=0,a=arguments.length;0<=a?b<=a:b>=a;0<=a?b+=1:b-=1){c=arguments[b];if(this.type===c||this.type.ascii===c)return true}return false},f.prototype.isEdgeCell=function(){return this.x<=20||this.x>=236||this.y<=20||this.y>=236},f.prototype.getNumericType=function(){var a;if(this.type.ascii==="^")return-1;a=k.indexOf(this.type),this.mine&&(a+=8);return a},f.prototype.setType=function(a,b,c){var d,e;c||(c=1),e=this.type,d=this.mine,b!==undefined&&(this.mine=b);if(typeof a==="string"){this.type=k[a];if(a.length!==1||!(this.type!=null))throw"Invalid terrain type: "+a}else if(typeof a==="number"){a>=10?(a-=8,this.mine=true):this.mine=false,this.type=k[a];if(!(this.type!=null))throw"Invalid terrain type: "+a}else a!==null&&(this.type=a);this.isEdgeCell()&&(this.mine=true);return c<0?undefined:this.map.retile(this.x-c,this.y-c,this.x+c,this.y+c)},f.prototype.setTile=function(a,b){this.mine&&!(this.pill!=null||this.base!=null)&&(b+=10);return this.map.view.onRetile(this,a,b)},f.prototype.retile=function(){if(this.pill!=null)return this.setTile(this.pill.armour,2);if(this.base!=null)return this.setTile(16,0);switch(this.type.ascii){case"^":return this.retileDeepSea();case"|":return this.retileBuilding();case" ":return this.retileRiver();case"~":return this.setTile(7,1);case"%":return this.setTile(5,1);case"=":return this.retileRoad();case"#":return this.retileForest();case":":return this.setTile(4,1);case".":return this.setTile(2,1);case"}":return this.setTile(8,1);case"b":return this.retileBoat()}},f.prototype.retileDeepSea=function(){var a,b,c,d,e,f,g,h,i;h=p(function(a,b){var c;c=this.neigh(a,b);if(c.isType("^"))return"d";if(c.isType(" ","b"))return"w";return"l"},this),a=h(0,-1),c=h(1,-1),i=h(1,0),f=h(1,1),d=h(0,1),e=h(-1,1),g=h(-1,0),b=h(-1,-1);return b!=="d"&&a!=="d"&&g!=="d"&&i==="d"&&d==="d"?this.setTile(10,3):c!=="d"&&a!=="d"&&i!=="d"&&g==="d"&&d==="d"?this.setTile(11,3):f!=="d"&&d!=="d"&&i!=="d"&&g==="d"&&a==="d"?this.setTile(13,3):e!=="d"&&d!=="d"&&g!=="d"&&i==="d"&&a==="d"?this.setTile(12,3):g==="w"&&i==="d"?this.setTile(14,3):d==="w"&&a==="d"?this.setTile(15,3):a==="w"&&d==="d"?this.setTile(16,3):i==="w"&&g==="d"?this.setTile(17,3):this.setTile(0,0)},f.prototype.retileBuilding=function(){var a,b,c,d,e,f,g,h,i;h=p(function(a,b){var c;c=this.neigh(a,b);if(c.isType("|","}"))return"b";return"o"},this),a=h(0,-1),c=h(1,-1),i=h(1,0),f=h(1,1),d=h(0,1),e=h(-1,1),g=h(-1,0),b=h(-1,-1);return b==="b"&&a==="b"&&c==="b"&&g==="b"&&i==="b"&&e==="b"&&d==="b"&&f==="b"?this.setTile(17,1):i==="b"&&a==="b"&&d==="b"&&g==="b"&&c!=="b"&&b!=="b"&&f!=="b"&&e!=="b"?this.setTile(30,1):i==="b"&&a==="b"&&d==="b"&&g==="b"&&c!=="b"&&b!=="b"&&f!=="b"&&e==="b"?this.setTile(22,2):i==="b"&&a==="b"&&d==="b"&&g==="b"&&c!=="b"&&b==="b"&&f!=="b"&&e!=="b"?this.setTile(23,2):i==="b"&&a==="b"&&d==="b"&&g==="b"&&c!=="b"&&b!=="b"&&f==="b"&&e!=="b"?this.setTile(24,2):i==="b"&&a==="b"&&d==="b"&&g==="b"&&c==="b"&&b!=="b"&&f!=="b"&&e!=="b"?this.setTile(25,2):b==="b"&&a==="b"&&g==="b"&&i==="b"&&e==="b"&&d==="b"&&f==="b"?this.setTile(16,2):a==="b"&&c==="b"&&g==="b"&&i==="b"&&e==="b"&&d==="b"&&f==="b"?this.setTile(17,2):b==="b"&&a==="b"&&c==="b"&&g==="b"&&i==="b"&&e==="b"&&d==="b"?this.setTile(18,2):b==="b"&&a==="b"&&c==="b"&&g==="b"&&i==="b"&&d==="b"&&f==="b"?this.setTile(19,2):g==="b"&&i==="b"&&a==="b"&&d==="b"&&c==="b"&&e==="b"&&b!=="b"&&f!=="b"?this.setTile(20,2):g==="b"&&i==="b"&&a==="b"&&d==="b"&&f==="b"&&b==="b"&&c!=="b"&&e!=="b"?this.setTile(21,2):a==="b"&&g==="b"&&i==="b"&&d==="b"&&f==="b"&&c==="b"?this.setTile(8,2):a==="b"&&g==="b"&&i==="b"&&d==="b"&&e==="b"&&b==="b"?this.setTile(9,2):a==="b"&&g==="b"&&i==="b"&&d==="b"&&e==="b"&&f==="b"?this.setTile(10,2):a==="b"&&g==="b"&&i==="b"&&d==="b"&&b==="b"&&c==="b"?this.setTile(11,2):a==="b"&&d==="b"&&g==="b"&&i!=="b"&&e==="b"&&b!=="b"?this.setTile(12,2):a==="b"&&d==="b"&&i==="b"&&f==="b"&&g!=="b"&&c!=="b"?this.setTile(13,2):a==="b"&&d==="b"&&i==="b"&&c==="b"&&f!=="b"?this.setTile(14,2):a==="b"&&d==="b"&&g==="b"&&b==="b"&&e!=="b"?this.setTile(15,2):i==="b"&&a==="b"&&g==="b"&&d!=="b"&&b!=="b"&&c!=="b"?this.setTile(26,1):i==="b"&&d==="b"&&g==="b"&&e!=="b"&&f!=="b"?this.setTile(27,1):i==="b"&&a==="b"&&d==="b"&&c!=="b"&&f!=="b"?this.setTile(28,1):d==="b"&&a==="b"&&g==="b"&&b!=="b"&&e!=="b"?this.setTile(29,1):g==="b"&&i==="b"&&a==="b"&&c==="b"&&b!=="b"?this.setTile(4,2):g==="b"&&i==="b"&&a==="b"&&b==="b"&&c!=="b"?this.setTile(5,2):g==="b"&&i==="b"&&d==="b"&&e==="b"&&f!=="b"?this.setTile(6,2):g==="b"&&i==="b"&&d==="b"&&a!=="b"&&f==="b"&&e!=="b"?this.setTile(7,2):i==="b"&&a==="b"&&d==="b"?this.setTile(0,2):g==="b"&&a==="b"&&d==="b"?this.setTile(1,2):i==="b"&&g==="b"&&d==="b"?this.setTile(2,2):i==="b"&&a==="b"&&g==="b"?this.setTile(3,2):i==="b"&&d==="b"&&f==="b"?this.setTile(18,1):g==="b"&&d==="b"&&e==="b"?this.setTile(19,1):i==="b"&&a==="b"&&c==="b"?this.setTile(20,1):g==="b"&&a==="b"&&b==="b"?this.setTile(21,1):i==="b"&&d==="b"?this.setTile(22,1):g==="b"&&d==="b"?this.setTile(23,1):i==="b"&&a==="b"?this.setTile(24,1):g==="b"&&a==="b"?this.setTile(25,1):g==="b"&&i==="b"?this.setTile(11,1):a==="b"&&d==="b"?this.setTile(12,1):i==="b"?this.setTile(13,1):g==="b"?this.setTile(14,1):d==="b"?this.setTile(15,1):a==="b"?this.setTile(16,1):this.setTile(6,1)},f.prototype.retileRiver=function(){var a,b,c,d,e;d=p(function(a,b){var c;c=this.neigh(a,b);if(c.isType("="))return"r";if(c.isType("^"," ","b"))return"w";return"l"},this),a=d(0,-1),e=d(1,0),b=d(0,1),c=d(-1,0);return a==="l"&&b==="l"&&e==="l"&&c==="l"?this.setTile(30,2):a==="l"&&b==="l"&&e==="w"&&c==="l"?this.setTile(26,2):a==="l"&&b==="l"&&e==="l"&&c==="w"?this.setTile(27,2):a==="l"&&b==="w"&&e==="l"&&c==="l"?this.setTile(28,2):a==="w"&&b==="l"&&e==="l"&&c==="l"?this.setTile(29,2):a==="l"&&c==="l"?this.setTile(6,3):a==="l"&&e==="l"?this.setTile(7,3):b==="l"&&c==="l"?this.setTile(8,3):b==="l"&&e==="l"?this.setTile(9,3):b==="l"&&a==="l"&&b==="l"?this.setTile(0,3):c==="l"&&e==="l"?this.setTile(1,3):c==="l"?this.setTile(2,3):b==="l"?this.setTile(3,3):e==="l"?this.setTile(4,3):a==="l"?this.setTile(5,3):this.setTile(1,0)},f.prototype.retileRoad=function(){var a,b,c,d,e,f,g,h,i;h=p(function(a,b){var c;c=this.neigh(a,b);if(c.isType("="))return"r";if(c.isType("^"," ","b"))return"w";return"l"},this),a=h(0,-1),c=h(1,-1),i=h(1,0),f=h(1,1),d=h(0,1),e=h(-1,1),g=h(-1,0),b=h(-1,-1);return b!=="r"&&a==="r"&&c!=="r"&&g==="r"&&i==="r"&&e!=="r"&&d==="r"&&f!=="r"?this.setTile(11,0):a==="r"&&g==="r"&&i==="r"&&d==="r"?this.setTile(10,0):g==="w"&&i==="w"&&a==="w"&&d==="w"?this.setTile(26,0):i==="r"&&d==="r"&&g==="w"&&a==="w"?this.setTile(20,0):g==="r"&&d==="r"&&i==="w"&&a==="w"?this.setTile(21,0):a==="r"&&g==="r"&&d==="w"&&i==="w"?this.setTile(22,0):i==="r"&&a==="r"&&g==="w"&&d==="w"?this.setTile(23,0):a==="w"&&d==="w"?this.setTile(24,0):g==="w"&&i==="w"?this.setTile(25,0):a==="w"&&d==="r"?this.setTile(16,0):i==="w"&&g==="r"?this.setTile(17,0):d==="w"&&a==="r"?this.setTile(18,0):g==="w"&&i==="r"?this.setTile(19,0):i==="r"&&d==="r"&&a==="r"&&(c==="r"||f==="r")?this.setTile(27,0):g==="r"&&i==="r"&&d==="r"&&(e==="r"||f==="r")?this.setTile(28,0):g==="r"&&a==="r"&&d==="r"&&(e==="r"||b==="r")?this.setTile(29,0):g==="r"&&i==="r"&&a==="r"&&(c==="r"||b==="r")?this.setTile(30,0):g==="r"&&i==="r"&&d==="r"?this.setTile(12,0):g==="r"&&a==="r"&&d==="r"?this.setTile(13,0):g==="r"&&i==="r"&&a==="r"?this.setTile(14,0):i==="r"&&a==="r"&&d==="r"?this.setTile(15,0):d==="r"&&i==="r"&&f==="r"?this.setTile(6,0):d==="r"&&g==="r"&&e==="r"?this.setTile(7,0):a==="r"&&g==="r"&&b==="r"?this.setTile(8,0):a==="r"&&i==="r"&&c==="r"?this.setTile(9,0):d==="r"&&i==="r"?this.setTile(2,0):d==="r"&&g==="r"?this.setTile(3,0):a==="r"&&g==="r"?this.setTile(4,0):a==="r"&&i==="r"?this.setTile(5,0):i==="r"||g==="r"?this.setTile(0,1):a==="r"||d==="r"?this.setTile(1,1):this.setTile(10,0)},f.prototype.retileForest=function(){var a,b,c,d;a=this.neigh(0,-1).isType("#"),d=this.neigh(1,0).isType("#"),b=this.neigh(0,1).isType("#"),c=this.neigh(-1,0).isType("#");return!a&&!c&&d&&b?this.setTile(9,9):!a&&c&&!d&&b?this.setTile(10,9):a&&c&&!d&&!b?this.setTile(11,9):a&&!c&&d&&!b?this.setTile(12,9):a&&!c&&!d&&!b?this.setTile(16,9):!a&&!c&&!d&&b?this.setTile(15,9):!a&&c&&!d&&!b?this.setTile(14,9):!a&&!c&&d&&!b?this.setTile(13,9):!a&&!c&&!d&&!b?this.setTile(8,9):this.setTile(3,1)},f.prototype.retileBoat=function(){var a,b,c,d,e;d=p(function(a,b){var c;c=this.neigh(a,b);if(c.isType("^"," ","b"))return"w";return"l"},this),a=d(0,-1),e=d(1,0),b=d(0,1),c=d(-1,0);return a!=="w"&&c!=="w"?this.setTile(15,6):a!=="w"&&e!=="w"?this.setTile(16,6):b!=="w"&&e!=="w"?this.setTile(17,6):b!=="w"&&c!=="w"?this.setTile(14,6):c!=="w"?this.setTile(12,6):e!=="w"?this.setTile(13,6):b!=="w"?this.setTile(10,6):this.setTile(11,6)},h=function(){function a(){}return a}(),h.prototype.onRetile=function(a,b,c){},g=function(){function a(a){this.map=a,this.cell=this.map.cells[this.y][this.x];return this}return a}(),i=function(){function a(b,c,d,e,f,g){this.speed=g,this.armour=f,this.owner_idx=e,this.y=d,this.x=c,a.__super__.constructor.apply(this,arguments);return this}return a}(),q(i,g),a=function(){function a(b,c,d,e,f,g,h){this.mines=h,this.shells=g,this.armour=f,this.owner_idx=e,this.y=d,this.x=c,a.__super__.constructor.apply(this,arguments);return this}return a}(),q(a,g),j=function(){function a(b,c,d,e){this.direction=e,this.y=d,this.x=c,a.__super__.constructor.apply(this,arguments);return this}return a}(),q(j,g),e=function(){function a(){var a,b,c;this.view=new h,this.pills=[],this.bases=[],this.starts=[],this.cells=new Array(d);for(c=0;0<=d?c<d:c>d;0<=d?c+=1:c-=1){a=this.cells[c]=new Array(d);for(b=0;0<=d?b<d:b>d;0<=d?b+=1:b-=1)a[b]=new this.CellClass(this,b,c)}return this}return a}(),e.prototype.CellClass=f,e.prototype.PillboxClass=i,e.prototype.BaseClass=a,e.prototype.StartClass=j,e.prototype.setView=function(a){this.view=a;return this.retile()},e.prototype.cellAtTile=function(a,b){var c,d;return(d=(c=this.cells[b])!=null?c[a]:undefined)?d:new this.CellClass(this,a,b,{isDummy:true})},e.prototype.each=function(a,b,c,e,f){var g,h,i;b!=null&&b>=0||(b=0),c!=null&&c>=0||(c=0),e!=null&&e<d||(e=d-1),f!=null&&f<d||(f=d-1);for(i=c;c<=f?i<=f:i>=f;c<=f?i+=1:i-=1){g=this.cells[i];for(h=b;b<=e?h<=e:h>=e;b<=e?h+=1:h-=1)a(g[h])}return this},e.prototype.clear=function(a,b,c,d){return this.each(function(a){a.type=k["^"];return a.mine=a.isEdgeCell()},a,b,c,d)},e.prototype.retile=function(a,b,c,d){return this.each(function(a){return a.retile()},a,b,c,d)},e.prototype.findCenterCell=function(){var a,b,c,e,f,g;e=b=d-1,a=c=0,this.each(function(d){b>d.x&&(b=d.x),c<d.x&&(c=d.x),e>d.y&&(e=d.y);return a<d.y?a=d.y:undefined}),b>c&&(e=b=0,a=c=d-1),f=o(b+(c-b)/2),g=o(e+(a-e)/2);return this.cellAtTile(f,g)},e.prototype.dump=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;a||(a={}),p=function(a,b){var c,d,e,f,g,h,i;f=null,h=null,e=0;for(i=0,c=a.length;i<c;i++){d=a[i],g=d.getNumericType();if(f===g){e++;continue}f!=null&&b(f,e,h),f=g,h=i,e=1}f!=null&&b(f,e,h);return},r=function(a){var b,c,d,e,f;e=[],f=null;for(c=0,b=a.length;c<b;c++)d=a[c],d=d&15,c%2===0?f=d<<4:(e.push(f+d),f=null);f!=null&&e.push(f);return e},x=a.noPills?[]:this.pills,m=a.noBases?[]:this.bases,B=a.noStarts?[]:this.starts,q=function(){k=[];for(b=0,f=(j="BMAPBOLO").length;b<f;b++)o=j[b],k.push(o.charCodeAt(0));return k}(),q.push(1,x.length,m.length,B.length);for(b=0,f=x.length;b<f;b++)w=x[b],q.push(w.x,w.y,w.owner_idx,w.armour,w.speed);for(c=0,g=m.length;c<g;c++)l=m[c],q.push(l.x,l.y,l.owner_idx,l.armour,l.shells,l.mines);for(d=0,h=B.length;d<h;d++)z=B[d],q.push(z.x,z.y,z.direction);y=A=C=t=D=null,u=function(){var a;if(!(y!=null))return;v(),a=r(y),q.push(a.length+4,D,C,t),q=q.concat(a);return y=null},s=function(a){if(!(502-y.length<a))return;u(),y=[];return C=t},v=function(){var a;if(!(A!=null))return;a=A,A=null,s(a.length+1),y.push(a.length-1),y=y.concat(a);return t+=a.length};for(e=0,i=(j=this.cells).length;e<i;e++)(function(){var a=j[e];D=a[0].y,y=C=t=A=null;return p(a,function(a,b,c){var d,e;if(a===-1){u();return}y!=null||(y=[],C=t=c);if(b>2){v();while(b>2)s(2),e=n(b,9),y.push(e+6,a),t+=e,b-=e}d=[];while(b>0)d.push(function(){A!=null||(A=[]),A.push(a),A.length===8&&v();return b--}());return d})})();u(),q.push(4,255,255,255);return q},e.load=function(a){var b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;q=0,y=function(b,c){var d,e,f,g,h,i;h=function(){try{g=[];for(d=0,e=(f=a.slice(q,q+b)).length;d<e;d++)i=f[d],g.push(i);return g}catch(a){throw c}}(),q+=b;return h},s=y(8,"Not a Bolo map.");for(r=0,c=(e="BMAPBOLO").length;r<c;r++){n=e[r];if(n.charCodeAt(0)!==s[r])throw"Not a Bolo map."}f=y(4,"Incomplete header"),G=f[0],v=f[1],u=f[2],w=f[3];if(G!==1)throw"Unsupported map version: "+G;t=new this,x=function(){j=[];for(r=0;0<=v?r<v:r>v;0<=v?r+=1:r-=1)j.push(y(5,"Incomplete pillbox data"));return j}(),l=function(){j=[];for(r=0;0<=u?r<u:r>u;0<=u?r+=1:r-=1)j.push(y(6,"Incomplete base data"));return j}(),C=function(){j=[];for(r=0;0<=w?r<w:r>w;0<=w?r+=1:r-=1)j.push(y(3,"Incomplete player start data"));return j}();while(true){g=y(4,"Incomplete map data"),o=g[0],I=g[1],D=g[2],p=g[3],o-=4;if(o===0&&I===255&&D===255&&p===255)break;z=y(o,"Incomplete map data"),A=0,E=function(){var a,b;a=m(A),b=a===A?(z[a]&240)>>4:z[a]&15,A+=.5;return b},H=D;while(H<p){B=E();if(B<8)for(r=1,h=B+1;1<=h?r<=h:r>=h;1<=h?r+=1:r-=1)t.cellAtTile(H++,I).setType(E(),undefined,-1);else{F=E();for(r=1,i=B-6;1<=i?r<=i:r>=i;1<=i?r+=1:r-=1)t.cellAtTile(H++,I).setType(F,undefined,-1)}}}t.pills=function(){j=[];for(b=0,d=x.length;b<d;b++)k=x[b],j.push(function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e==="object"?e:d}(t.PillboxClass,[t].concat(k),function(){}));return j}(),t.bases=function(){j=[];for(b=0,d=l.length;b<d;b++)k=l[b],j.push(function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e==="object"?e:d}(t.BaseClass,[t].concat(k),function(){}));return j}(),t.starts=function(){j=[];for(b=0,d=C.length;b<d;b++)k=C[b],j.push(function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e==="object"?e:d}(t.StartClass,[t].concat(k),function(){}));return j}();return t},e.extended=function(a){return a.load?undefined:a.load=this.load},b.TERRAIN_TYPES=k,b.MapView=h,b.Map=e}).call(this)}),require.module("bolo/net",function(a,b,c){(function(){b.SYNC_MESSAGE="s".charCodeAt(0),b.WELCOME_MESSAGE="W".charCodeAt(0),b.CREATE_MESSAGE="C".charCodeAt(0),b.DESTROY_MESSAGE="D".charCodeAt(0),b.MAPCHANGE_MESSAGE="M".charCodeAt(0),b.UPDATE_MESSAGE="U".charCodeAt(0),b.TINY_UPDATE_MESSAGE="u".charCodeAt(0),b.SOUNDEFFECT_MESSAGE="S".charCodeAt(0),b.START_TURNING_CCW="L",b.STOP_TURNING_CCW="l",b.START_TURNING_CW="R",b.STOP_TURNING_CW="r",b.START_ACCELERATING="A",b.STOP_ACCELERATING="a",b.START_BRAKING="B",b.STOP_BRAKING="b",b.START_SHOOTING="S",b.STOP_SHOOTING="s",b.INC_RANGE="I",b.DEC_RANGE="D",b.BUILD_ORDER="O"}).call(this)}),require.module("bolo/sounds",function(a,b,c){(function(){b.BIG_EXPLOSION=0,b.BUBBLES=1,b.FARMING_TREE=2,b.HIT_TANK=3,b.MAN_BUILDING=4,b.MAN_DYING=5,b.MAN_LAY_MINE=6,b.MINE_EXPLOSION=7,b.SHOOTING=8,b.SHOT_BUILDING=9,b.SHOT_TREE=10,b.TANK_SINKING=11}).call(this)}),require.module("bolo/objects/world_pillbox",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=function(a,b){return function(){return a.apply(b,arguments)}},s=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};n=Math.min,m=Math.max,o=Math.round,i=Math.ceil,d=Math.PI,j=Math.cos,p=Math.sin,f=c("../constants").TILE_SIZE_WORLD,h=c("../helpers"),k=h.distance,l=h.heading,b=c("../object"),q=c("../sounds"),e=c("./shell"),g=function(){function a(a,b,c,d,e,g){this.speed=g,this.armour=e,this.owner_idx=d,arguments.length===1?this.world=a:(this.x=(b+.5)*f,this.y=(c+.5)*f),this.on("netUpdate",r(function(a){var b;(a.hasOwnProperty("x")||a.hasOwnProperty("y"))&&this.updateCell(),(a.hasOwnProperty("inTank")||a.hasOwnProperty("carried"))&&this.updateCell(),a.hasOwnProperty("owner")&&this.updateOwner();return a.hasOwnProperty("armour")?(b=this.cell)!=null?b.retile():undefined:undefined},this));return this}return a}(),s(g,b),g.prototype.updateCell=function(){this.cell!=null&&(delete this.cell.pill,this.cell.retile());if(this.inTank||this.carried)return this.cell=null;this.cell=this.world.map.cellAtWorld(this.x,this.y),this.cell.pill=this;return this.cell.retile()},g.prototype.updateOwner=function(){var a;this.owner?(this.owner_idx=this.owner.$.tank_idx,this.team=this.owner.$.team):this.owner_idx=this.team=255;return(a=this.cell)!=null?a.retile():undefined},g.prototype.serialization=function(a,b){b("O","owner"),b("f","inTank"),b("f","carried"),b("f","haveTarget"),this.inTank||this.carried?this.x=this.y=null:(b("H","x"),b("H","y")),b("B","armour"),b("B","speed"),b("B","coolDown");return b("B","reload")},g.prototype.placeAt=function(a){var b;this.inTank=this.carried=false,b=a.getWorldCoordinates(),this.x=b[0],this.y=b[1],this.updateCell();return this.reset()},g.prototype.spawn=function(){return this.reset()},g.prototype.reset=function(){this.coolDown=32;return this.reload=0},g.prototype.anySpawn=function(){return this.updateCell()},g.prototype.update=function(){var a,b,c,f,g,h,m,r,s,t,u,v,w,x,y;if(this.inTank||this.carried)return;if(this.armour===0){this.haveTarget=false;for(a=0,c=(g=this.world.tanks).length;a<c;a++){u=g[a];if(u.armour!==255)if(u.cell===this.cell){this.inTank=true,this.x=this.y=null,this.updateCell(),this.ref("owner",u),this.updateOwner();break}}return}this.reload=n(this.speed,this.reload+1),--this.coolDown===0&&(this.coolDown=32,this.speed=n(100,this.speed+1));if(!(this.reload>=this.speed))return;v=null,w=Infinity;for(b=0,f=(h=this.world.tanks).length;b<f;b++)u=h[b],u.armour!==255&&!((m=this.owner)!=null?m.$.isAlly(u):undefined)&&(r=k(this,u),r<=2048&&r<w&&(v=u,w=r));if(!v)return this.haveTarget=false;this.haveTarget&&(t=(256-v.getDirection16th()*16)*2*d/256,x=v.x+w/32*o(j(t)*i(v.speed)),y=v.y+w/32*o(p(t)*i(v.speed)),s=256-l(this,{x:x,y:y})*256/(2*d),this.world.spawn(e,this,{direction:s}),this.soundEffect(q.SHOOTING)),this.haveTarget=true;return this.reload=0},g.prototype.aggravate=function(){this.coolDown=32;return this.speed=m(6,o(this.speed/2))},g.prototype.takeShellHit=function(a){this.aggravate(),this.armour=m(0,this.armour-1),this.cell.retile();return q.SHOT_BUILDING},g.prototype.takeExplosionHit=function(){this.armour=m(0,this.armour-5);return this.cell.retile()},g.prototype.repair=function(a){var b;b=n(a,i((15-this.armour)/4)),this.armour=n(15,this.armour+b*4),this.cell.retile();return b},a.exports=g}).call(this)}),require.module("bolo/helpers",function(a,b,c){(function(){var a,c,d,e,f;f=Math.sqrt,a=Math.atan2,d=b.extend=function(a,b){var c,d;for(c in b)d=b[c],a[c]=d;return a},c=b.distance=function(a,b){var c,d;c=a.x-b.x,d=a.y-b.y;return f(c*c+d*d)},e=b.heading=function(b,c){return a(c.y-b.y,c.x-b.x)}}).call(this)}),require.module("bolo/object",function(a,b,c){(function(){var b,d,e=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};d=c("villain/world/net/object"),b=function(){function a(){return d.apply(this,arguments)}return a}(),e(b,d),b.prototype.styled=null,b.prototype.team=null,b.prototype.x=null,b.prototype.y=null,b.prototype.soundEffect=function(a){return this.world.soundEffect(a,this.x,this.y,this)},b.prototype.getTile=function(){},a.exports=b}).call(this)}),require.module("villain/world/net/object",function(a,b,c){(function(){var b,d,e=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};d=c("../object"),b=function(){return function a(){return d.apply(this,arguments)}}(),e(b,d),b.prototype.charId=null,b.prototype.serialization=function(a,b){},b.prototype.netSpawn=function(){},b.prototype.anySpawn=function(){},a.exports=b}).call(this)}),require.module("villain/world/object",function(a,b,c){(function(){var b,d,e=Object.prototype.hasOwnProperty,f=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};b=c("events").EventEmitter,d=function(){return function a(a){this.world=a;return this}}(),f(d,b),d.prototype.world=null,d.prototype.idx=null,d.prototype.updatePriority=0,d.prototype.spawn=function(){},d.prototype.update=function(){},d.prototype.destroy=function(){},d.prototype.ref=function(a,b){var c,d;if((c=this[a])!=null?c.$===b:undefined)return this[a];(c=this[a])!=null?c.clear():undefined;if(!b)return null;this[a]=d={$:b,owner:this,attribute:a},d.events={},d.on=function(a,c){var e;b.on(a,c),((e=d.events)[a]||(e[a]=[])).push(c);return d},d.clear=function(){var a,c,f,g,h,i;f=d.events;for(g in f){if(!e.call(f,g))continue;i=f[g];for(a=0,c=i.length;a<c;a++)h=i[a],b.removeListener(g,h)}d.owner.removeListener("finalize",d.clear);return d.owner[d.attribute]=null},d.on("finalize",d.clear),d.owner.on("finalize",d.clear);return d},a.exports=d}).call(this)}),require.module("events",function(a,b,c){var d=b.EventEmitter=function(){},e=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};d.prototype.emit=function(a){if(a==="error")if(!this._events||!this._events.error||e(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return false;var b=this._events[a];if(!b)return false;if(typeof b=="function"){if(arguments.length<=3)b.call(this,arguments[1],arguments[2]);else{var c=Array.prototype.slice.call(arguments,1);b.apply(this,c)}return true}if(e(b)){var c=Array.prototype.slice.call(arguments,1),d=b.slice();for(var f=0,g=d.length;f<g;f++)d[f].apply(this,c);return true}return false},d.prototype.addListener=function(a,b){if("function"!==typeof b)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",a,b),this._events[a]?e(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b;return this},d.prototype.on=d.prototype.addListener,d.prototype.removeListener=function(a,b){if("function"!==typeof b)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var c=this._events[a];if(e(c)){var d=c.indexOf(b);if(d<0)return this;c.splice(d,1),c.length==0&&delete this._events[a]}else this._events[a]===b&&delete this._events[a];return this},d.prototype.removeAllListeners=function(a){a&&this._events&&this._events[a]&&(this._events[a]=null);return this},d.prototype.listeners=function(a){this._events||(this._events={}),this._events[a]||(this._events[a]=[]),e(this._events[a])||(this._events[a]=[this._events[a]]);return this._events[a]}}),require.module("bolo/objects/shell",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o=function(a,b){return function(){return a.apply(b,arguments)}},p=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};m=Math.round,l=Math.floor,j=Math.cos,n=Math.sin,g=Math.PI,k=c("../helpers").distance,b=c("../object"),i=c("../constants").TILE_SIZE_WORLD,e=c("./explosion"),f=c("./mine_explosion"),d=function(){function a(){}return a}(),d.prototype.takeShellHit=function(a){},h=function(){function a(b){var c;this.world=b,c=this,this.spawn=function(){return a.prototype.spawn.apply(c,arguments)},this.on("netSync",o(function(){return this.updateCell()},this));return this}return a}(),p(h,b),h.prototype.updatePriority=20,h.prototype.styled=false,h.prototype.serialization=function(a,b){a&&(b("B","direction"),b("O","owner"),b("O","attribution"),b("f","onWater")),b("H","x"),b("H","y");return b("B","lifespan")},h.prototype.updateCell=function(){return this.cell=this.world.map.cellAtWorld(this.x,this.y)},h.prototype.getDirection16th=function(){return m((this.direction-1)/16)%16},h.prototype.getTile=function(){var a;a=this.getDirection16th();return[a,4]},h.prototype.spawn=function(a,b){var c;b||(b={}),this.ref("owner",a),this.owner.$.hasOwnProperty("owner_idx")?this.ref("attribution",(c=this.owner.$.owner)!=null?c.$:undefined):this.ref("attribution",this.owner.$),this.direction=b.direction||this.owner.$.direction,this.lifespan=(b.range||7)*i/32-2,this.onWater=b.onWater||false,this.x=this.owner.$.x,this.y=this.owner.$.y;return this.move()},h.prototype.update=function(){var a,b,c,d,e,f,g;this.move(),b=this.collide();if(b){c=b[0],e=b[1],d=e.takeShellHit(this),c==="cell"?(a=this.cell.getWorldCoordinates(),f=a[0],g=a[1],this.world.soundEffect(d,f,g)):(f=this.x,g=this.y,e.soundEffect(d));return this.asplode(f,g,c)}return this.lifespan--===0?this.asplode(this.x,this.y,"eol"):undefined},h.prototype.move=function(){this.radians||(this.radians=(256-this.direction)*2*g/256),this.x+=m(j(this.radians)*32),this.y+=m(n(this.radians)*32);return this.updateCell()},h.prototype.collide=function(){var a,b,c,d,e,f,g,h,i,j,l,m,n,o,p;if((l=this.cell.pill)&&l.armour>0&&l!==((c=this.owner)!=null?c.$:undefined)){d=this.cell.getWorldCoordinates(),o=d[0],p=d[1];if(k(this,{x:o,y:p})<=127)return["cell",l]}for(a=0,b=(e=this.world.tanks).length;a<b;a++){m=e[a];if(m!==((f=this.owner)!=null?f.$:undefined)&&m.armour!==255)if(k(this,m)<=127)return["tank",m]}if(((g=this.attribution)!=null?g.$:undefined)===((h=this.owner)!=null?h.$:undefined)&&(j=this.cell.base)&&j.armour>4)if(this.onWater||(j!=null?j.owner:undefined)!=null&&!j.owner.$.isAlly((i=this.attribution)!=null?i.$:undefined))return["cell",j];n=this.onWater?!this.cell.isType("^"," ","%"):this.cell.isType("|","}","#","b");if(n)return["cell",this.cell]},h.prototype.asplode=function(a,b,c){var d,g,h,j,l,m;for(d=0,g=(h=this.world.tanks).length;d<g;d++){m=h[d];if(l=m.builder.$)(j=l.order)===l.states.inTank||j===l.states.parachuting||(c==="cell"?l.cell===this.cell&&l.kill():k(this,l)<i/2&&l.kill())}this.world.spawn(e,a,b),this.world.spawn(f,this.cell);return this.world.destroy(this)},a.exports=h}).call(this)}),require.module("bolo/objects/explosion",function(a,b,c){(function(){var b,d,e,f=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};e=Math.floor,b=c("../object"),d=function(){function a(){return b.apply(this,arguments)}return a}(),f(d,b),d.prototype.styled=false,d.prototype.serialization=function(a,b){a&&(b("H","x"),b("H","y"));return b("B","lifespan")},d.prototype.getTile=function(){switch(e(this.lifespan/3)){case 7:return[20,3];case 6:return[21,3];case 5:return[20,4];case 4:return[21,4];case 3:return[20,5];case 2:return[21,5];case 1:return[18,4];default:return[19,4]}},d.prototype.spawn=function(a,b){this.y=b,this.x=a;return this.lifespan=23},d.prototype.update=function(){return this.lifespan--===0?this.world.destroy(this):undefined},a.exports=d}).call(this)}),require.module("bolo/objects/mine_explosion",function(a,b,c){(function(){var b,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};f=c("../constants").TILE_SIZE_WORLD,g=c("../helpers").distance,b=c("../object"),h=c("../sounds"),d=c("./explosion"),e=function(){function a(){return b.apply(this,arguments)}return a}(),i(e,b),e.prototype.styled=null,e.prototype.serialization=function(a,b){a&&(b("H","x"),b("H","y"));return b("B","lifespan")},e.prototype.spawn=function(a){var b;b=a.getWorldCoordinates(),this.x=b[0],this.y=b[1];return this.lifespan=10},e.prototype.anySpawn=function(){return this.cell=this.world.map.cellAtWorld(this.x,this.y)},e.prototype.update=function(){if(this.lifespan--===0){this.cell.mine&&this.asplode();return this.world.destroy(this)}},e.prototype.asplode=function(){var a,b,c,e,i,j;this.cell.setType(null,false,0),this.cell.takeExplosionHit();for(a=0,b=(c=this.world.tanks).length;a<b;a++)j=c[a],j.armour!==255&&g(this,j)<384&&j.takeMineHit(),i=j.builder.$,(e=i.order)===i.states.inTank||e===i.states.parachuting||g(this,i)<f/2&&i.kill();this.world.spawn(d,this.x,this.y),this.soundEffect(h.MINE_EXPLOSION);return this.spread()},e.prototype.spread=function(){var a;a=this.cell.neigh(1,0),a.isEdgeCell()||this.world.spawn(e,a),a=this.cell.neigh(0,1),a.isEdgeCell()||this.world.spawn(e,a),a=this.cell.neigh(-1,0),a.isEdgeCell()||this.world.spawn(e,a),a=this.cell.neigh(0,-1);return a.isEdgeCell()?undefined:this.world.spawn(e,a)},a.exports=e}).call(this)}),require.module("bolo/objects/world_base",function(a,b,c){(function(){var b,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};h=Math.min,g=Math.max,d=c("../constants").TILE_SIZE_WORLD,f=c("../helpers").distance,b=c("../object"),i=c("../sounds"),e=function(){function a(a,b,c,e,f,g,h){this.mines=h,this.shells=g,this.armour=f,this.owner_idx=e,arguments.length===1?this.world=a:(this.x=(b+.5)*d,this.y=(c+.5)*d,a.cellAtTile(b,c).setType("=",false,-1)),this.on("netUpdate",j(function(a){return a.hasOwnProperty("owner")?this.updateOwner():undefined},this));return this}return a}(),k(e,b),e.prototype.serialization=function(a,b){a&&(b("H","x"),b("H","y")),b("O","owner"),b("O","refueling"),this.refueling&&b("B","refuelCounter"),b("B","armour"),b("B","shells");return b("B","mines")},e.prototype.updateOwner=function(){this.owner?(this.owner_idx=this.owner.$.tank_idx,this.team=this.owner.$.team):this.owner_idx=this.team=255;return this.cell.retile()},e.prototype.anySpawn=function(){this.cell=this.world.map.cellAtWorld(this.x,this.y);return this.cell.base=this},e.prototype.update=function(){var a;this.refueling&&(this.refueling.$.cell!==this.cell||this.refueling.$.armour===255)&&this.ref("refueling",null);if(!this.refueling)return this.findSubject();if(--this.refuelCounter!==0)return;if(this.armour>0&&this.refueling.$.armour<40){a=h(5,this.armour,40-this.refueling.$.armour),this.refueling.$.armour+=a,this.armour-=a;return this.refuelCounter=46}if(this.shells>0&&this.refueling.$.shells<40){this.refueling.$.shells+=1,this.shells-=1;return this.refuelCounter=7}if(this.mines>0&&this.refueling.$.mines<40){this.refueling.$.mines+=1,this.mines-=1;return this.refuelCounter=7}return this.refuelCounter=1},e.prototype.findSubject=function(){var a,b,c,d,e,f,g,h,i,k;k=function(){f=[];for(a=0,c=(e=this.world.tanks).length;a<c;a++)i=e[a],i.armour!==255&&i.cell===this.cell&&f.push(i);return f}.call(this);for(a=0,c=k.length;a<c;a++){var i=k[a];if((e=this.owner)!=null?e.$.isAlly(i):undefined){this.ref("refueling",i),this.refuelCounter=46;break}g=true;for(b=0,d=k.length;b<d;b++)h=k[b],h!==i&&(i.isAlly(h)||(g=false));if(g){this.ref("owner",i),this.updateOwner(),this.owner.on("destroy",j(function(){this.ref("owner",null);return this.updateOwner()},this)),this.ref("refueling",i),this.refuelCounter=46;break}}return},e.prototype.takeShellHit=function(a){var b,c,d,e,h;if(this.owner)for(b=0,c=(d=this.world.map.pills).length;b<c;b++)h=d[b],!(h.inTank||h.carried)&&h.armour>0&&(((e=h.owner)!=null?e.$.isAlly(this.owner.$):undefined)&&f(this,h)<=2304&&h.aggravate());this.armour=g(0,this.armour-5);return i.SHOT_BUILDING},a.exports=e}).call(this)}),require.module("bolo/objects/flood_fill",function(a,b,c){(function(){var b,d,e=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};b=c("../object"),d=function(){function a(){return b.apply(this,arguments)}return a}(),e(d,b),d.prototype.styled=null,d.prototype.serialization=function(a,b){a&&(b("H","x"),b("H","y"));return b("B","lifespan")},d.prototype.spawn=function(a){var b;b=a.getWorldCoordinates(),this.x=b[0],this.y=b[1];return this.lifespan=16},d.prototype.anySpawn=function(){this.cell=this.world.map.cellAtWorld(this.x,this.y);return this.neighbours=[this.cell.neigh(1,0),this.cell.neigh(0,1),this.cell.neigh(-1,0),this.cell.neigh(0,-1)]},d.prototype.update=function(){if(this.lifespan--===0){this.flood();return this.world.destroy(this)}},d.prototype.canGetWet=function(){var a,b,c,d,e;e=false;for(a=0,b=(c=this.neighbours).length;a<b;a++){d=c[a];if(!(d.base||d.pill)&&d.isType(" ","^","b")){e=true;break}}return e},d.prototype.flood=function(){if(this.canGetWet()){this.cell.setType(" ",false);return this.spread()}},d.prototype.spread=function(){var a,b,c,e;for(a=0,b=(c=this.neighbours).length;a<b;a++)e=c[a],!(e.base||e.pill)&&e.isType("%")&&this.world.spawn(d,e);return},a.exports=d}).call(this)}),require.module("bolo/client/everard",function(a,b,c){(function(){a.exports="Qk1BUEJPTE8BEAsQW5H/D2Vjbv8PZV90/w9lVHX/D2VwbP8PZYFr/w9lq27/D2WueP8PZa58/w9l\nmpL/D2Veh/8PZWmJ/w9lcYn/D2Vsf/8PZWx4/w9lrYn/D2WBaP9aWlqvaf9aWlpWbv9aWlquev9a\nWlp5e/9aWlpsfP9aWlqLff9aWlpti/9aWlpVjf9aWlqlkv9aWlp+mP9aWlpMjABMfABcZA1sZAx8\nZAyMZAycZAysZAu4fAi4jAisnAWcnASMnAR8nARsnARcnAMQZk608fHx8fHx8fHx8fGRGGdNtaH0\ntNUB8PCQkgGSAeIB4vHh8pKRHWhNtZGU9YUE1QHnlOcAxIIB4gHiAfKygdKQkoEfaU21gZT1lQTV\nAde05wSSgYIB4pHCAfKC8ZEAhJKBIGpNtYGEhfSFBNUBx9TXBIeC8bKBooHiofICgQSBgoEja021\ngQSFhNUEhQTVAbf0xwSXEhwrGSAaIBwqGCAfKSFCsSBsTbWBBIUE5QSFBNWRl/TUl/KSsaIBkqGy\ngfKCBKKBIG1NtYEEhQSFpIUEhQT1AZf0xwT3t7LxAfIB8oIEooEjbk21gQSFBIWEFUhQSFBKUHpQ\nGn1NcE9/fCAfKioeIEooECBvTbWBBIUEtQSFBIUE9QG3tOcE9/eygZL3p5HCBKKBIXBNtYEEhQS1\nBIUEhQT1gbeU9wT394eSAaL3x5GiBKKBIHFNtYEEhdSFBIUE9RUffXIED355CHAff3lwGiBKKBAe\nck21gQT1hQSFBPUVH31wD09JQQeB9/eXsQSBgoEdc021gQT1hQSFBPUVH31yBA9+dAQHH399eAFA\nsRl0TbWB9KSFFH9QH35wT39wD09PS0AJKBAddU21gbUH9QTl8QGH4QTx8RFJH394eFlxBICSgSJ2\nTbWB9cUE1fGx0ATw8EBAEIcFlwCHhYcQeFl4WnFHooEgd021gfWFtLXx0QD0pAD0pDAQeVx4WXhR\ncKcAhwS3gSJ4TbXhtQTl8QLREE8IAkBNAEkDQBCHBYcldZeF96cEt4EleU21gbcBtQTl8eEgQPRA\nQEC0AJRAQBCHBYclBaeFl5XHBLWBJnpNtYG3AaUQSQtfHhkATwJASQBLBUBAELeVhwCHhceVhwSH\nlYEje021gbcBpQD09PSUAJQgQJQgQNRwQEAQX3p4W3JXWXtYECd8TbWBtwGlkBQLXxAtEQSwRAQE\nkASwdAQEBAEQhYeF9wW3JXXngSd9TbWBtwHVBMXx4SBAtCBAtAC0cEBAQBAJUHhZeVt5VHV1e1h4\nECp+TbWBtwHVBIXx8ZEwQEsATQBNB0BAEFcVeFlwWnBYcFl3V1dXVwWHgSd/TbWBtwGFsQSRp+EC\n0UBAQPSEAPRAQBCHpZeVB5UXWXNXV7WHgSeATbWBt6GgBKeV8dFwQEBATQBPBUBAEPcFpwWHBZd1\ndXV1cFh4ECSBTbWB96AEp5UH8aFAEECUANQgQNRAQECh15W3lUdXV7WHgSOCTbWB94CHBNUH8ZFC\nAQTwBJAkBLB0BAQBAHsffHJXXngQI4NNtYHwgIcElcfxAYIgEPSEAJQAtACUQEAQt+HnFXxZeBAf\nhE21gfCAhwTVhwGSsZIQHQBLAE0ATQEQ95fB97eBHIVNtYEAxwC3BKeVhwHyggCRAPQA9PSE98fx\n4R6GTbWBEHoAewF01YcB8oKQAfDw8AGHBPe3gPe3gR6HTbWBIHCnALc0V1t4HyogDx8fGBhwT3x4\nD3p4EByITbWBMHB6C3BNUHgfKyAfeg9+cE98eA95eRAeiU21gZD3IECXlRcfLCAYcAt8D3xxBPCA\nl7D3B5Efik21gQeAB4DHAPT09LSHAKcAhwD09MQwcHsPcHkQK4tNtYEHgAeAxyBAh4CXAaKQFAwk\nFwcKcApwCHAPeHBKCRBIEwQH0PcHkSaMTbWBB4AHgOQAh4CXAaKwwgGXEHwAew94eUEQkQSBAPQA\n94eBKo1NtYEHgAeAFH0IeAh4GSkPJhcHBw9/engCQQkQSBgBQMcQegh4WHgQK45NtYEHgAeAh/CA\nB4GSoPKBpwCHhccA15AHgCQQkQShFAxwCnAIeFh4ECmPTbWBhyBwh4CngIcAhwGioPISGnANegh6\nUXCXgCQQ4QSwB9CHhYeBKZBNtYGHMHB5AHgAeAhwCHAZKw8hIafwtwWHhZCHEE0aSAhwDHANeBAo\nkU21gYeQRwcHgASAhxB4GSsPISGnsPeFhwWAlwCk0QSAB/AXC3gQKpJNtYGnUHBweAB4CHIHGnsP\ncH8YH3hYcVCXAIShAqEUCXEEhwCnALeBKJNNtYEHoEcHB4AHgAeAFxp7D3hwHnwbeFhwCXgJShxJ\nCXkAeAt4ECaUTbWBB6BHBweAB4AnB4GnsJehpwH3p7G3gAeQBPGAFAp8C3kQIpVNtYGXAIcwcHgK\ncgcbewh8GXAffnoceAlNEgdKD3l5ECCWTbWRhwCnEHgAegFxt7CHwZcB9/cH8fGBEH9ATHoQHZdN\ntZGH8Aeggbewl6GnAfeHkfengPERDygrexAbmE21sfCXgAHHsKeBtwH34feHAPERDygpfRAQmU60\n8fHx8fHx8fHx8fGRBP///w==".split("\n").join("")}).call(this)}),require.module("bolo/objects/all",function(a,b,c){(function(){b.registerWithWorld=function(a){a.registerType(c("./world_pillbox")),a.registerType(c("./world_base")),a.registerType(c("./flood_fill")),a.registerType(c("./tank")),a.registerType(c("./explosion")),a.registerType(c("./mine_explosion")),a.registerType(c("./shell")),a.registerType(c("./fireball"));return a.registerType(c("./builder"))}}).call(this)}),require.module("bolo/objects/tank",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=function(a,b){return function(){return a.apply(b,arguments)}},w=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};r=Math.round,o=Math.floor,l=Math.ceil,q=Math.min,u=Math.sqrt,p=Math.max,s=Math.sin,m=Math.cos,h=Math.PI,j=c("../constants").TILE_SIZE_WORLD,n=c("../helpers").distance,b=c("../object"),t=c("../sounds"),e=c("./explosion"),g=c("./mine_explosion"),i=c("./shell"),f=c("./fireball"),d=c("./builder"),k=function(){function a(a){this.world=a,this.on("netUpdate",v(function(a){return a.hasOwnProperty("x")||a.hasOwnProperty("y")||a.armour===255?this.updateCell():undefined},this));return this}return a}(),w(k,b),k.prototype.styled=true,k.prototype.anySpawn=function(){this.updateCell(),this.world.addTank(this);return this.on("finalize",v(function(){return this.world.removeTank(this)},this))},k.prototype.updateCell=function(){return this.cell=this.x!=null&&this.y!=null?this.world.map.cellAtWorld(this.x,this.y):null},k.prototype.reset=function(){var a,b;b=this.world.map.getRandomStart(),a=b.cell.getWorldCoordinates(),this.x=a[0],this.y=a[1],this.direction=b.direction*16,this.updateCell(),this.speed=0,this.slideTicks=0,this.slideDirection=0,this.accelerating=false,this.braking=false,this.turningClockwise=false,this.turningCounterClockwise=false,this.turnSpeedup=0,this.shells=40,this.mines=0,this.armour=40,this.trees=0,this.reload=0,this.shooting=false,this.firingRange=7,this.waterTimer=0;return this.onBoat=true},k.prototype.serialization=function(a,b){var c;a&&(b("B","team"),b("O","builder")),b("B","armour");if(this.armour===255){b("O","fireball"),this.x=this.y=null;return}(c=this.fireball)!=null?c.clear():undefined,b("H","x"),b("H","y"),b("B","direction"),b("B","speed",{tx:function(a){return a*4},rx:function(a){return a/4}}),b("B","slideTicks"),b("B","slideDirection"),b("B","turnSpeedup",{tx:function(a){return a+50},rx:function(a){return a-50}}),b("B","shells"),b("B","mines"),b("B","trees"),b("B","reload"),b("B","firingRange",{tx:function(a){return a*2},rx:function(a){return a/2}}),b("B","waterTimer"),b("f","accelerating"),b("f","braking"),b("f","turningClockwise"),b("f","turningCounterClockwise"),b("f","shooting");return b("f","onBoat")},k.prototype.getDirection16th=function(){return r((this.direction-1)/16)%16},k.prototype.getSlideDirection16th=function(){return r((this.slideDirection-1)/16)%16},k.prototype.getCarryingPillboxes=function(){var a,b,c,d,e,f;e=[];for(a=0,b=(c=this.world.map.pills).length;a<b;a++)f=c[a],f.inTank&&((d=f.owner)!=null?d.$:undefined)===this&&e.push(f);return e},k.prototype.getTile=function(){var a,b;a=this.getDirection16th(),b=this.onBoat?1:0;return[a,b]},k.prototype.isAlly=function(a){return a===this||this.team!==255&&a.team===this.team},k.prototype.increaseRange=function(){return this.firingRange=q(7,this.firingRange+.5)},k.prototype.decreaseRange=function(){return this.firingRange=p(1,this.firingRange-.5)},k.prototype.takeShellHit=function(a){var b;this.armour-=5,this.armour<0?(b=this.shells+this.mines>20,this.ref("fireball",this.world.spawn(f,this.x,this.y,a.direction,b)),this.kill()):(this.slideTicks=8,this.slideDirection=a.direction,this.onBoat&&(this.onBoat=false,this.speed=0,this.cell.isType("^")&&this.sink()));return t.HIT_TANK},k.prototype.takeMineHit=function(){var a;this.armour-=10;if(this.armour<0){a=this.shells+this.mines>20,this.ref("fireball",this.world.spawn(f,this.x,this.y,this.direction,a));return this.kill()}if(this.onBoat){this.onBoat=false,this.speed=0;return this.cell.isType("^")?this.sink():undefined}},k.prototype.spawn=function(a){this.team=a,this.reset();return this.ref("builder",this.world.spawn(d,this))},k.prototype.update=function(){if(this.death())return;this.shootOrReload(),this.turn(),this.accelerate(),this.fixPosition();return this.move()},k.prototype.destroy=function(){this.dropPillboxes();return this.world.destroy(this.builder.$)},k.prototype.death=function(){if(this.armour!==255)return false;if(this.world.authority&&--this.respawnTimer===0){delete this.respawnTimer,this.reset();return false}return true},k.prototype.shootOrReload=function(){this.reload>0&&this.reload--;if(!(this.shooting&&this.reload===0&&this.shells>0))return;this.shells--,this.reload=13,this.world.spawn(i,this,{range:this.firingRange,onWater:this.onBoat});return this.soundEffect(t.SHOOTING)},k.prototype.turn=function(){var a,b;b=this.cell.getTankTurn(this);if(this.turningClockwise===this.turningCounterClockwise){this.turnSpeedup=0;return}this.turningCounterClockwise?(a=b,this.turnSpeedup<10&&(a/=2),this.turnSpeedup<0&&(this.turnSpeedup=0),this.turnSpeedup++):(a=-b,this.turnSpeedup>-10&&(a/=2),this.turnSpeedup>0&&(this.turnSpeedup=0),this.turnSpeedup--),this.direction+=a;while(this.direction<0)this.direction+=256;return this.direction>=256?this.direction%=256:undefined},k.prototype.accelerate=function(){var a,b;b=this.cell.getTankSpeed(this),this.speed>b?a=-.25:this.accelerating===this.braking?a=0:this.accelerating?a=.25:a=-.25;return a>0&&this.speed<b?this.speed=q(b,this.speed+a):a<0&&this.speed>0?this.speed=p(0,this.speed+a):undefined},k.prototype.fixPosition=function(){var a,b,c,d,e,f;this.cell.getTankSpeed(this)===0&&(e=j/2,this.x%j>=e?this.x++:this.x--,this.y%j>=e?this.y++:this.y--,this.speed=p(0,this.speed-1)),d=[];for(a=0,b=(c=this.world.tanks).length;a<b;a++)f=c[a],f!==this&&f.armour!==255&&d.push(function(){if(!(n(this,f)>255)){f.x<this.x?this.x++:this.x--;return f.y<this.y?this.y++:this.y--}}.call(this));return d},k.prototype.move=function(){var a,b,c,d,e,f,g,i;b=c=0,this.speed>0&&(g=(256-this.getDirection16th()*16)*2*h/256,b+=r(m(g)*l(this.speed)),c+=r(s(g)*l(this.speed))),this.slideTicks>0&&(g=(256-this.getSlideDirection16th()*16)*2*h/256,b+=r(m(g)*16),c+=r(s(g)*16),this.slideTicks--),d=this.x+b,e=this.y+c,i=true,b!==0&&(a=b>0?d+64:d-64,a=this.world.map.cellAtWorld(a,e),a.getTankSpeed(this)!==0&&(i=false,this.onBoat&&!a.isType(" ","^")&&this.speed<16||(this.x=d))),c!==0&&(a=c>0?e+64:e-64,a=this.world.map.cellAtWorld(d,a),a.getTankSpeed(this)!==0&&(i=false,this.onBoat&&!a.isType(" ","^")&&this.speed<16||(this.y=e))),b===0&&c===0||(i&&(this.speed=p(0,this.speed-1)),f=this.cell,this.updateCell(),f!==this.cell&&this.checkNewCell(f));if(!this.onBoat&&this.speed<=3&&this.cell.isType(" ")){if(++this.waterTimer===15){(this.shells!==0||this.mines!==0)&&this.soundEffect(t.BUBBLES),this.shells=p(0,this.shells-1),this.mines=p(0,this.mines-1);return this.waterTimer=0}}else return this.waterTimer=0},k.prototype.checkNewCell=function(a){if(this.onBoat)this.cell.isType(" ","^")||this.leaveBoat(a);else{if(this.cell.isType("^"))return this.sink();this.cell.isType("b")&&this.enterBoat()}return this.cell.mine?this.world.spawn(g,this.cell):undefined},k.prototype.leaveBoat=function(a){var b,c;if(this.cell.isType("b")){this.cell.setType(" ",false,0),b=(this.cell.x+.5)*j,c=(this.cell.y+.5)*j,this.world.spawn(e,b,c);return this.world.soundEffect(t.SHOT_BUILDING,b,c)}a.isType(" ")&&a.setType("b",false,0);return this.onBoat=false},k.prototype.enterBoat=function(){this.cell.setType(" ",false,0);return this.onBoat=true},k.prototype.sink=function(){this.world.soundEffect(t.TANK_SINKING,this.x,this.y);return this.kill()},k.prototype.kill=function(){this.dropPillboxes(),this.x=this.y=null,this.armour=255;return this.respawnTimer=255},k.prototype.dropPillboxes=function(){var a,b,c,d,e,f,g,h,i;e=this.getCarryingPillboxes();if(e.length===0)return;h=this.cell.x,f=this.cell.y,g=u(e.length),b=o(g/2),g=r(g),h-=b,f-=b,c=f+g;while(e.length!==0){for(i=f;f<=c?i<c:i>c;f<=c?i+=1:i-=1){a=this.world.map.cellAtTile(h,i);if(a.base!=null||a.pill!=null||a.isType("|","}","b"))continue;if(!(d=e.pop()))return;d.placeAt(a)}h+=1}return},a.exports=k}).call(this)}),require.module("bolo/objects/fireball",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};i=Math.round,h=Math.cos,j=Math.sin,f=Math.PI,g=c("../constants").TILE_SIZE_WORLD,k=c("../sounds"),b=c("../object"),d=c("./explosion"),e=function(){function a(){return b.apply(this,arguments)}return a}(),l(e,b),e.prototype.styled=null,e.prototype.serialization=function(a,b){a&&(b("B","direction"),b("f","largeExplosion")),b("H","x"),b("H","y");return b("B","lifespan")},e.prototype.getDirection16th=function(){return i((this.direction-1)/16)%16},e.prototype.spawn=function(a,b,c,d){this.largeExplosion=d,this.direction=c,this.y=b,this.x=a;return this.lifespan=80},e.prototype.update=function(){if(this.lifespan--%2===0){if(this.wreck())return;this.move()}if(this.lifespan===0){this.explode();return this.world.destroy(this)}},e.prototype.wreck=function(){var a;this.world.spawn(d,this.x,this.y),a=this.world.map.cellAtWorld(this.x,this.y);if(a.isType("^")){this.world.destroy(this),this.soundEffect(k.TANK_SINKING);return true}a.isType("b")?(a.setType(" "),this.soundEffect(k.SHOT_BUILDING)):a.isType("#")&&(a.setType("."),this.soundEffect(k.SHOT_TREE));return false},e.prototype.move=function(){var a,b,c,d,e,g;this.dx!=null||(g=(256-this.direction)*2*f/256,this.dx=i(h(g)*48),this.dy=i(j(g)*48)),b=this.dx,c=this.dy,d=this.x+b,e=this.y+c,b!==0&&(a=b>0?d+24:d-24,a=this.world.map.cellAtWorld(a,e),a.isObstacle()||(this.x=d));if(c!==0){a=c>0?e+24:e-24,a=this.world.map.cellAtWorld(d,a);return a.isObstacle()?undefined:this.y=e}},e.prototype.explode=function(){var a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r;m=[this.world.map.cellAtWorld(this.x,this.y)],this.largeExplosion?(n=this.dx>0?1:-1,o=this.dy>0?1:-1,m.push(m[0].neigh(n,0)),m.push(m[0].neigh(0,o)),m.push(m[0].neigh(n,o)),this.soundEffect(k.BIG_EXPLOSION)):this.soundEffect(k.MINE_EXPLOSION),i=[];for(a=0,c=m.length;a<c;a++)l=m[a],i.push(function(){l.takeExplosionHit();for(b=0,e=(f=this.world.tanks).length;b<e;b++){p=f[b];if(j=p.builder.$)(g=j.order)===j.states.inTank||g===j.states.parachuting||j.cell===l&&j.kill()}h=l.getWorldCoordinates(),q=h[0],r=h[1];return this.world.spawn(d,q,r)}.call(this));return i},a.exports=e}).call(this)}),require.module("bolo/objects/builder",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q=function(a,b){return function(){return a.apply(b,arguments)}},r=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};n=Math.round,k=Math.floor,h=Math.ceil,m=Math.min,i=Math.cos,o=Math.sin,f=c("../constants").TILE_SIZE_WORLD,g=c("../helpers"),j=g.distance,l=g.heading,b=c("../object"),p=c("../sounds"),e=c("./mine_explosion"),d=function(){function a(a){this.world=a,this.on("netUpdate",q(function(a){return a.hasOwnProperty("x")||a.hasOwnProperty("y")?this.updateCell():undefined},this));return this}return a}(),r(d,b),d.prototype.states={inTank:0,waiting:1,returning:2,parachuting:3,actions:{_min:10,forest:10,road:11,repair:12,boat:13,building:14,pillbox:15,mine:16}},d.prototype.styled=true,d.prototype.updateCell=function(){return this.cell=this.x!=null&&this.y!=null?this.world.map.cellAtWorld(this.x,this.y):null},d.prototype.serialization=function(a,b){a&&b("O","owner"),b("B","order"),this.order===this.states.inTank?this.x=this.y=null:(b("H","x"),b("H","y"),b("H","targetX"),b("H","targetY"),b("B","trees"),b("O","pillbox"),b("f","hasMine"));return this.order===this.states.waiting?b("B","waitTimer"):undefined},d.prototype.getTile=function(){return this.order===this.states.parachuting?[16,1]:[17,k(this.animation/3)]},d.prototype.performOrder=function(a,b,c){var d,e;if(this.order!==this.states.inTank)return;if(!(this.owner.$.onBoat||this.owner.$.cell===c||this.owner.$.cell.getManSpeed(this)>0))return;e=null;if(a==="mine"){if(this.owner.$.mines===0)return;b=0}else{if(this.owner.$.trees<b)return;if(a==="pillbox"){if(!(e=this.owner.$.getCarryingPillboxes().pop()))return;e.inTank=false,e.carried=true}}this.trees=b,this.hasMine=a==="mine",this.ref("pillbox",e),this.hasMine&&this.owner.$.mines--,this.owner.$.trees-=b,this.order=this.states.actions[a],this.x=this.owner.$.x,this.y=this.owner.$.y,d=c.getWorldCoordinates(),this.targetX=d[0],this.targetY=d[1];return this.updateCell()},d.prototype.kill=function(){var a,b,c,d;if(!this.world.authority)return;this.soundEffect(p.MAN_DYING),this.order=this.states.parachuting,this.trees=0,this.hasMine=false,this.pillbox&&(this.pillbox.$.placeAt(this.cell),this.ref("pillbox",null)),this.owner.$.armour===255?(a=[this.x,this.y],this.targetX=a[0],this.targetY=a[1]):(b=[this.owner.$.x,this.owner.$.y],this.targetX=b[0],this.targetY=b[1]),d=this.world.map.getRandomStart();return c=d.cell.getWorldCoordinates(),this.x=c[0],this.y=c[1],c},d.prototype.spawn=function(a){this.ref("owner",a);return this.order=this.states.inTank},d.prototype.anySpawn=function(){this.team=this.owner.$.team;return this.animation=0},d.prototype.update=function(){if(this.order===this.states.inTank)return;this.animation=(this.animation+1)%9;switch(this.order){case this.states.waiting:return this.waitTimer--===0?this.order=this.states.returning:undefined;case this.states.parachuting:return this.parachutingIn({x:this.targetX,y:this.targetY});case this.states.returning:return this.owner.$.armour!==255?this.move(this.owner.$,128,160):undefined;default:return this.move({x:this.targetX,y:this.targetY},16,144)}},d.prototype.move=function(a,b,c){var d,e,f,g,k,p,q,r,s,t;s=this.cell.getManSpeed(this),q=false,t=this.world.map.cellAtWorld(this.targetX,this.targetY),s===0&&this.cell===t&&(s=16),this.owner.$.armour!==255&&this.owner.$.onBoat&&j(this,this.owner.$)<c&&(q=true,s=16),s=m(s,j(this,a)),r=l(this,a),k=this.x+(e=n(i(r)*h(s))),p=this.y+(f=n(o(r)*h(s))),g=0;if(e!==0){d=this.world.map.cellAtWorld(k,this.y);if(q||d===t||d.getManSpeed(this)>0)this.x=k,g++}if(f!==0){d=this.world.map.cellAtWorld(this.x,p);if(q||d===t||d.getManSpeed(this)>0)this.y=p,g++}if(g===0)return this.order=this.states.returning;this.updateCell();return j(this,a)<=b?this.reached():undefined},d.prototype.reached=function(){var a;if(this.order===this.states.returning){this.order=this.states.inTank,this.x=this.y=null,this.pillbox&&(this.pillbox.$.inTank=true,this.pillbox.$.carried=false,this.ref("pillbox",null)),this.owner.$.trees=m(40,this.owner.$.trees+this.trees),this.trees=0,this.hasMine&&(this.owner.$.mines=m(40,this.owner.$.mines+1)),this.hasMine=false;return}if(this.cell.mine){this.world.spawn(e,this.cell),this.order=this.states.waiting,this.waitTimer=20;return}switch(this.order){case this.states.actions.forest:if(this.cell.base||this.cell.pill||!this.cell.isType("#"))break;this.cell.setType("."),this.trees=4,this.soundEffect(p.FARMING_TREE);break;case this.states.actions.road:if(this.cell.base||this.cell.pill||this.cell.isType("|","}","b","^","#","="))break;if(this.cell.isType(" ")&&this.cell.hasTankOnBoat())break;this.cell.setType("="),this.trees=0,this.soundEffect(p.MAN_BUILDING);break;case this.states.actions.repair:if(this.cell.pill)a=this.cell.pill.repair(this.trees),this.trees-=a;else if(this.cell.isType("}"))this.cell.setType("|"),this.trees=0;else break;this.soundEffect(p.MAN_BUILDING);break;case this.states.actions.boat:if(!(this.cell.isType(" ")&&!this.cell.hasTankOnBoat()))break;this.cell.setType("b"),this.trees=0,this.soundEffect(p.MAN_BUILDING);break;case this.states.actions.building:if(this.cell.base||this.cell.pill||this.cell.isType("b","^","#","}","|"," "))break;this.cell.setType("|"),this.trees=0,this.soundEffect(p.MAN_BUILDING);break;case this.states.actions.pillbox:if(this.cell.pill||this.cell.base||this.cell.isType("b","^","#","|","}"," "))break;this.pillbox.$.armour=15,this.trees=0,this.pillbox.$.placeAt(this.cell),this.ref("pillbox",null),this.soundEffect(p.MAN_BUILDING);break;case this.states.actions.mine:if(this.cell.base||this.cell.pill||this.cell.isType("^"," ","|","b","}"))break;this.cell.setType(null,true,0),this.hasMine=false,this.soundEffect(p.MAN_LAY_MINE)}this.order=this.states.waiting;return this.waitTimer=20},d.prototype.parachutingIn=function(a){var b;if(j(this,a)<=16)return this.order=this.states.returning;b=l(this,a),this.x+=n(i(b)*3),this.y+=n(o(b)*3);return this.updateCell()},a.exports=d}).call(this)}),require.module("bolo/client/base64",function(a,b,c){(function(){var a;a=function(a){var b,c,d,e,f,g,h,i,j,k;if(a.length%4!==0)throw new Error("Invalid base64 input length, not properly padded?");h=a.length/4*3,k=a.substr(-2),k[0]==="="&&h--,k[1]==="="&&h--,f=new Array(h),i=new Array(4),g=0;for(e=0,b=a.length;e<b;e++){c=a[e],d=c.charCodeAt(0),j=e%4,i[j]=function(){if(65<=d&&d<=90)return d-65;if(97<=d&&d<=122)return d-71;if(48<=d&&d<=57)return d+4;if(d===43)return 62;if(d===47)return 63;if(d===61)return-1;throw new Error("Invalid base64 input character: "+c)}();if(j!==3)continue;f[g++]=((i[0]&63)<<2)+((i[1]&48)>>4),i[2]!==-1&&(f[g++]=((i[1]&15)<<4)+((i[2]&60)>>2)),i[3]!==-1&&(f[g++]=((i[2]&3)<<6)+(i[3]&63))}return f},b.decodeBase64=a}).call(this)}),require.module("bolo/client/world/mixin",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}};f=c("villain/loop"),g=c("../progress"),j=c("../vignette"),h=c("../soundkit"),e=c("../renderer/offscreen_2d"),i=c("../../constants").TICK_LENGTH_MS,k=c("../../helpers"),d=c("../../world_mixin"),b={start:function(){var a;a=new j;return this.waitForCache(a,l(function(){return this.loadResources(a,l(function(){return this.loaded(a)},this))},this))},waitForCache:function(a,b){var c,d;if(!(typeof applicationCache!=="undefined"&&applicationCache!==null))return b();a.message("Checking for newer versions"),d=$(applicationCache),d.bind("downloading.bolo",function(){a.message("Downloading latest version"),a.showProgress();return d.bind("progress.bolo",function(b){return a.progress(b)})}),d.bind("updateready.bolo",function(){a.hideProgress(),a.message("Reloading latest version");return location.reload()}),c=function(){a.hideProgress(),d.unbind(".bolo");return b()},d.bind("cached.bolo",c);return d.bind("noupdate.bolo",c)},loadResources:function(a,b){var c;a.message("Loading resources"),c=new g,this.images={},this.loadImages(l(function(a){var b;this.images[a]=b=new Image,$(b).load(c.add());return b.src="images/"+a+".png"},this)),this.soundkit=new h,this.loadSounds(l(function(a){var b,d,e,f,g;g="sounds/"+a+".ogg",f=a.split("_");for(d=1,b=f.length;1<=b?d<b:d>b;1<=b?d+=1:d-=1)f[d]=f[d].substr(0,1).toUpperCase()+f[d].substr(1);e=f.join("");return this.soundkit.load(e,g,c.add())},this)),typeof applicationCache!=="undefined"&&applicationCache!==null||(a.showProgress(),c.on("progress",function(b){return a.progress(b)})),c.on("complete",function(){a.hideProgress();return b()});return c.wrapUp()},loadImages:function(a){a("base"),a("styled");return a("overlay")},loadSounds:function(a){a("big_explosion_far"),a("big_explosion_near"),a("bubbles"),a("farming_tree_far"),a("farming_tree_near"),a("hit_tank_far"),a("hit_tank_near"),a("hit_tank_self"),a("man_building_far"),a("man_building_near"),a("man_dying_far"),a("man_dying_near"),a("man_lay_mine_near"),a("mine_explosion_far"),a("mine_explosion_near"),a("shooting_far"),a("shooting_near"),a("shooting_self"),a("shot_building_far"),a("shot_building_near"),a("shot_tree_far"),a("shot_tree_near"),a("tank_sinking_far");return a("tank_sinking_near")},commonInitialization:function(){this.renderer=new e(this),this.map.world=this,this.map.setView(this.renderer),this.boloInit(),this.loop=new f(this),this.loop.tickRate=i,this.increasingRange=false,this.decreasingRange=false,this.rangeAdjustTimer=0,this.input=$("<input/>",{id:"input-dummy",type:"text",autocomplete:"off"}),this.input.insertBefore(this.renderer.canvas).focus();return this.input.add(this.renderer.canvas).add("#tool-select label").keydown(l(function(a){a.preventDefault();switch(a.which){case 90:return this.increasingRange=true;case 88:return this.decreasingRange=true;default:return this.handleKeydown(a)}},this)).keyup(l(function(a){a.preventDefault();switch(a.which){case 90:return this.increasingRange=false;case 88:return this.decreasingRange=false;default:return this.handleKeyup(a)}},this))},idle:function(){return this.renderer.draw()},failure:function(a){var b;(b=this.loop)!=null?b.stop():undefined;return $("<div/>").text(a).dialog({modal:true,dialogClass:"unclosable"})},checkBuildOrder:function(a,b){var c,d,e,f,g;d=this.player.builder.$;if(d.order!==d.states.inTank)return[false];if(b.mine)return[false];c=function(){switch(a){case"forest":return b.base||b.pill||!b.isType("#")?[false]:["forest",0];case"road":return b.base||b.pill||b.isType("|","}","b","^")?[false]:b.isType("#")?["forest",0]:b.isType("=")?[false]:b.isType(" ")&&b.hasTankOnBoat()?[false]:["road",2];case"building":return b.base||b.pill||b.isType("b","^")?[false]:b.isType("#")?["forest",0]:b.isType("}")?["repair",1]:b.isType("|")?[false]:b.isType(" ")?b.hasTankOnBoat()?[false]:["boat",20]:b===this.player.cell?[false]:["building",2];case"pillbox":return b.pill?b.pill.armour===16?[false]:b.pill.armour>=11?["repair",1,true]:b.pill.armour>=7?["repair",2,true]:b.pill.armour>=3?["repair",3,true]:b.pill.armour<3?["repair",4,true]:undefined:b.isType("#")?["forest",0]:b.base||b.isType("b","^","|","}"," ")?[false]:b===this.player.cell?[false]:["pillbox",4];case"mine":return b.base||b.pill||b.isType("^"," ","|","b","}")?[false]:["mine"]}}.call(this),a=c[0],g=c[1],e=c[2];if(!a)return[false];if(a==="mine"){if(this.player.mines===0)return[false];return["mine"]}if(a==="pill"){f=this.player.getCarryingPillboxes();if(f.length===0)return[false]}if(this.player.trees<g){if(!e)return[false];g=this.player.trees}return[a,g,e]}},k.extend(b,d),a.exports=b}).call(this)}),require.module("villain/loop",function(a,b,c){(function(){var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){return function a(a){this.handler=a,this.timer=null;return this}}(),b.prototype.tickRate=50,b.prototype.start=function(){var a;if(this.timer)return null;a=Date.now(),this.timer=setInterval(c(function(){var b;b=Date.now();while(b-a>=this.tickRate)this.handler.tick(),a+=this.tickRate;return this.handler.idle()},this),this.tickRate);return null},b.prototype.stop=function(){if(!this.timer)return null;clearInterval(this.timer);return this.timer=null},a.exports=b}).call(this)}),require.module("bolo/client/progress",function(a,b,c){(function(){var b,d,e=Array.prototype.slice,f=function(a,b){return function(){return a.apply(b,arguments)}},g=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};b=c("events").EventEmitter,d=function(){function a(a){this.lengthComputable=true,this.loaded=0,this.total=a!=null?a:0,this.wrappingUp=false;return this}return a}(),g(d,b),d.prototype.add=function(){var a,b,c;b=e.call(arguments,0),typeof b[0]==="number"?a=b.shift():a=1,typeof b[0]==="function"?c=b.shift():c=null,this.total+=a,this.emit("progress",this);return f(function(){this.step(a);return typeof c==="function"?c():undefined},this)},d.prototype.step=function(a){a!=null||(a=1),this.loaded+=a,this.emit("progress",this);return this.checkComplete()},d.prototype.set=function(a,b){this.loaded=b,this.total=a,this.emit("progress",this);return this.checkComplete()},d.prototype.wrapUp=function(){this.wrappingUp=true;return this.checkComplete()},d.prototype.checkComplete=function(){if(!(this.wrappingUp&&this.loaded>=this.total))return;return this.emit("complete")},a.exports=d}).call(this)}),require.module("bolo/client/vignette",function(a,b,c){(function(){var b;b=function(){function a(){this.container=$("<div class=\"vignette\"/>").appendTo("body"),this.messageLine=$("<div class=\"vignette-message\"/>").appendTo(this.container);return this}return a}(),b.prototype.message=function(a){return this.messageLine.text(a)},b.prototype.showProgress=function(){},b.prototype.hideProgress=function(){},b.prototype.progress=function(a){},b.prototype.destroy=function(){this.container.remove();return this.container=this.messageLine=null},a.exports=b}).call(this)}),require.module("bolo/client/soundkit",function(a,b,c){(function(){var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(){var a;this.sounds={},this.isSupported=false,typeof Audio!=="undefined"&&Audio!==null&&(a=new Audio,this.isSupported=a.canPlayType!=null);return this}return a}(),b.prototype.register=function(a,b){this.sounds[a]=b;return this[a]=c(function(){return this.play(a)},this)},b.prototype.load=function(a,b,d){var e;this.register(a,b);if(!this.isSupported)return typeof d==="function"?d():undefined;e=new Audio,d&&$(e).one("canplaythrough",d),$(e).one("error",c(function(a){switch(a.code){case a.MEDIA_ERR_SRC_NOT_SUPPORTED:this.isSupported=false;return typeof d==="function"?d():undefined}},this)),e.src=b;return e.load()},b.prototype.play=function(a){var b;if(!this.isSupported)return;b=new Audio,b.src=this.sounds[a],b.play();return b},a.exports=b}).call(this)}),require.module("bolo/client/renderer/offscreen_2d",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};l=Math.floor,k=c("../../constants"),j=k.TILE_SIZE_PIXELS,f=k.MAP_SIZE_TILES,d=c("./common_2d"),i=16,e=f/i,h=i*j,b=function(){function a(a,b,c){this.renderer=a,this.sx=b*i,this.sy=c*i,this.ex=this.sx+i-1,this.ey=this.sy+i-1,this.psx=b*h,this.psy=c*h,this.pex=this.psx+h-1,this.pey=this.psy+h-1,this.canvas=null;return this}return a}(),b.prototype.isInView=function(a,b,c,d){return c<this.psx||d<this.psy?false:a>this.pex||b>this.pey?false:true},b.prototype.build=function(){this.canvas=$("<canvas/>")[0],this.canvas.width=this.canvas.height=h,this.ctx=this.canvas.getContext("2d"),this.ctx.translate(-this.psx,-this.psy);return this.renderer.world.map.each(m(function(a){return this.onRetile(a,a.tile[0],a.tile[1])},this),this.sx,this.sy,this.ex,this.ey)},b.prototype.clear=function(){return this.canvas=this.ctx=null},b.prototype.onRetile=function(a,b,c){var d,e;if(!this.canvas)return;return(e=a.pill||a.base)?this.renderer.drawStyledTile(a.tile[0],a.tile[1],(d=e.owner)!=null?d.$.team:undefined,a.x*j,a.y*j,this.ctx):this.renderer.drawTile(a.tile[0],a.tile[1],a.x*j,a.y*j,this.ctx)},g=function(){function a(){return d.apply(this,arguments)}return a}(),n(g,d),g.prototype.setup=function(){var a,c,d,f,h;g.__super__.setup.apply(this,arguments),this.cache=new Array(e),a=[];for(h=0;0<=e?h<e:h>e;0<=e?h+=1:h-=1)a.push(function(){d=this.cache[h]=new Array(e),c=[];for(f=0;0<=e?f<e:f>e;0<=e?f+=1:f-=1)c.push(d[f]=new b(this,f,h));return c}.call(this));return a},g.prototype.onRetile=function(a,b,c){var d,e;a.tile=[b,c],d=l(a.x/i),e=l(a.y/i);return this.cache[e][d].onRetile(a,b,c)},g.prototype.drawMap=function(a,b,c,d){var e,f,g,i,j,k,l,m,n,o;l=a+c-1,m=b+d-1,k=false;for(e=0,g=(j=this.cache).length;e<g;e++){n=j[e];for(f=0,i=n.length;f<i;f++){o=n[f];if(!o.isInView(a,b,l,m)){o.canvas&&o.clear();continue}if(!o.canvas){if(k)continue;o.build(),k=true}this.ctx.drawImage(o.canvas,0,0,h,h,o.psx,o.psy,h,h)}}return},a.exports=g}).call(this)}),require.module("bolo/client/renderer/common_2d",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};n=Math.min,o=Math.round,e=Math.PI,p=Math.sin,k=Math.cos,i=c("../../constants"),h=i.TILE_SIZE_PIXELS,f=i.PIXEL_SIZE_WORLD,j=c("../../helpers"),l=j.distance,m=j.heading,b=c("./base"),g=c("../../team_colors"),d=function(){function a(){return b.apply(this,arguments)}return a}(),q(d,b),d.prototype.setup=function(){var a,b,c,d;try{this.ctx=this.canvas[0].getContext("2d"),this.ctx.drawImage}catch(a){throw"Could not initialize 2D canvas: "+a.message}c=this.images.overlay,d=$("<canvas/>")[0],d.width=c.width,d.height=c.height,a=d.getContext("2d"),a.globalCompositeOperation="copy",a.drawImage(c,0,0),b=a.getImageData(0,0,c.width,c.height),this.overlay=b.data;return this.prestyled={}},d.prototype.drawTile=function(a,b,c,d,e){return(e||this.ctx).drawImage(this.images.base,a*h,b*h,h,h,c,d,h,h)},d.prototype.createPrestyled=function(a){var b,c,d,e,f,g,h,i,j,k,l;b=this.images.styled,j=b.width,f=b.height,i=$("<canvas/>")[0],i.width=j,i.height=f,c=i.getContext("2d"),c.globalCompositeOperation="copy",c.drawImage(b,0,0),h=c.getImageData(0,0,j,f),d=h.data;for(k=0;0<=j?k<j:k>j;0<=j?k+=1:k-=1)for(l=0;0<=f?l<f:l>f;0<=f?l+=1:l-=1)g=4*(l*j+k),e=this.overlay[g]/255,d[g+0]=o(e*a.r+(1-e)*d[g+0]),d[g+1]=o(e*a.g+(1-e)*d[g+1]),d[g+2]=o(e*a.b+(1-e)*d[g+2]),d[g+3]=n(255,d[g+3]+this.overlay[g]);c.putImageData(h,0,0);return i},d.prototype.drawStyledTile=function(a,b,c,d,e,f){var i,j;(j=this.prestyled[c])||(j=(i=g[c])?this.prestyled[c]=this.createPrestyled(i):this.images.styled);return(f||this.ctx).drawImage(j,a*h,b*h,h,h,d,e,h,h)},d.prototype.centerOn=function(a,b,c){var d,e,f,g,h;this.ctx.save(),d=this.getViewAreaAtWorld(a,b),f=d[0],g=d[1],h=d[2],e=d[3],this.ctx.translate(-f,-g),c(f,g,h,e);return this.ctx.restore()},d.prototype.drawBuilderIndicator=function(a){var b,c,d,g,h,i,j,o;d=a.owner.$;if((b=l(d,a))<=128)return;g=d.x/f,h=d.y/f,this.ctx.save(),this.ctx.globalCompositeOperation="source-over",this.ctx.globalAlpha=n(1,(b-128)/1024),c=n(50,b/10240*50)+32,i=m(d,a),this.ctx.beginPath(),this.ctx.moveTo(j=g+k(i)*c,o=h+p(i)*c),i+=e,this.ctx.lineTo(j+k(i-.4)*10,o+p(i-.4)*10),this.ctx.lineTo(j+k(i+.4)*10,o+p(i+.4)*10),this.ctx.closePath(),this.ctx.fillStyle="yellow",this.ctx.fill();return this.ctx.restore()},d.prototype.drawNames=function(){var a,b,c,d,e,g,h,i,j;this.ctx.save(),this.ctx.strokeStyle=this.ctx.fillStyle="white",this.ctx.font="bold 11px sans-serif",this.ctx.textBaselines="alphabetic",this.ctx.textAlign="left",g=this.world.player;for(a=0,b=(c=this.world.tanks).length;a<b;a++){h=c[a];if(h.name&&h.armour!==255&&h!==g){if(g){if((d=l(g,h))<=768)continue;this.ctx.globalAlpha=n(1,(d-768)/1536)}else this.ctx.globalAlpha=1;e=this.ctx.measureText(h.name),this.ctx.beginPath(),this.ctx.moveTo(i=o(h.x/f)+16,j=o(h.y/f)-16),this.ctx.lineTo(i+=12,j-=9),this.ctx.lineTo(i+e.width,j),this.ctx.stroke(),this.ctx.fillText(h.name,i,j-2)}}return this.ctx.restore()},a.exports=d}).call(this)}),require.module("bolo/client/renderer/base",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=function(a,b){return function(){return a.apply(b,arguments)}},s=Object.prototype.hasOwnProperty;m=Math.min,l=Math.max,n=Math.round,k=Math.cos,o=Math.sin,e=Math.PI,q=Math.sqrt,j=c("../../constants"),h=j.TILE_SIZE_PIXELS,i=j.TILE_SIZE_WORLD,f=j.PIXEL_SIZE_WORLD,d=j.MAP_SIZE_PIXELS,p=c("../../sounds"),g=c("../../team_colors"),b=function(){function a(a){this.world=a,this.images=this.world.images,this.soundkit=this.world.soundkit,this.canvas=$("<canvas/>").appendTo("body"),this.lastCenter=this.world.map.findCenterCell().getWorldCoordinates(),this.mouse=[0,0],this.canvas.click(r(function(a){return this.handleClick(a)},this)),this.canvas.mousemove(r(function(a){return this.mouse=[a.pageX,a.pageY]},this)),this.setup(),this.handleResize(),$(window).resize(r(function(){return this.handleResize()},this));return this}return a}(),b.prototype.setup=function(){},b.prototype.centerOn=function(a,b,c){},b.prototype.drawTile=function(a,b,c,d){},b.prototype.drawStyledTile=function(a,b,c,d,e){},b.prototype.drawMap=function(a,b,c,d){},b.prototype.drawBuilderIndicator=function(a){},b.prototype.onRetile=function(a,b,c){},b.prototype.draw=function(){var a,b,c,d,e;this.world.player?(a=this.world.player,d=a.x,e=a.y,this.world.player.fireball!=null&&(b=this.world.player.fireball.$,d=b.x,e=b.y)):d=e=null,d!=null&&e!=null?this.lastCenter=[d,e]:(c=this.lastCenter,d=c[0],e=c[1]),this.centerOn(d,e,r(function(a,b,c,d){var e,g,i,j,k,l,m,o,p;this.drawMap(a,b,c,d);for(e=0,g=(i=this.world.objects).length;e<g;e++){k=i[e];if(k.styled!=null&&k.x!=null&&k.y!=null){j=k.getTile(),o=j[0],p=j[1],l=n(k.x/f)-h/2,m=n(k.y/f)-h/2;switch(k.styled){case true:this.drawStyledTile(o,p,k.team,l,m);break;case false:this.drawTile(o,p,l,m)}}}return this.drawOverlay()},this));return this.hud?this.updateHud():undefined},b.prototype.playSound=function(a,b,c,d){var e,f,g,h,j;h=function(){if(this.world.player&&d===this.world.player)return"Self";f=b-this.lastCenter[0],g=c-this.lastCenter[1],e=q(f*f+g*g);return e>40*i?"None":e>15*i?"Far":"Near"}.call(this);if(h==="None")return;j=function(){switch(a){case p.BIG_EXPLOSION:return"bigExplosion"+h;case p.BUBBLES:return h==="Self"?"bubbles":undefined;case p.FARMING_TREE:return"farmingTree"+h;case p.HIT_TANK:return"hitTank"+h;case p.MAN_BUILDING:return"manBuilding"+h;case p.MAN_DYING:return"manDying"+h;case p.MAN_LAY_MINE:return h==="Near"?"manLayMineNear":undefined;case p.MINE_EXPLOSION:return"mineExplosion"+h;case p.SHOOTING:return"shooting"+h;case p.SHOT_BUILDING:return"shotBuilding"+h;case p.SHOT_TREE:return"shotTree"+h;case p.TANK_SINKING:return"tankSinking"+h}}();return j?this.soundkit[j]():undefined},b.prototype.handleResize=function(){this.canvas[0].width=window.innerWidth,this.canvas[0].height=window.innerHeight,this.canvas.css({width:window.innerWidth+"px",height:window.innerHeight+"px"});return $("body").css({width:window.innerWidth+"px",height:window.innerHeight+"px"})},b.prototype.handleClick=function(a){var b,c,d,e,f,g,h,i;a.preventDefault(),this.world.input.focus();if(!this.currentTool)return;b=this.mouse,g=b[0],h=b[1],e=this.getCellAtScreen(g,h),c=this.world.checkBuildOrder(this.currentTool,e),d=c[0],i=c[1],f=c[2];return d?this.world.buildOrder(d,i,e):undefined},b.prototype.getViewAreaAtWorld=function(a,b){var c,e,g,h,i;c=this.canvas[0],i=c.width,e=c.height,g=n(a/f-i/2),g=l(0,m(d-i,g)),h=n(b/f-e/2),h=l(0,m(d-e,h));return[g,h,i,e]},b.prototype.getCellAtScreen=function(a,b){var c,d,e,f,g,h,i,j;c=this.lastCenter,e=c[0],f=c[1],d=this.getViewAreaAtWorld(e,f),h=d[0],i=d[1],j=d[2],g=d[3];return this.world.map.cellAtPixel(h+a,i+b)},b.prototype.drawOverlay=function(){var a,b;(b=this.world.player)&&b.armour!==255&&(a=b.builder.$,a.order===a.states.inTank||a.order===a.states.parachuting||this.drawBuilderIndicator(a),this.drawReticle()),this.drawNames();return this.drawCursor()},b.prototype.drawReticle=function(){var a,b,c,d;a=this.world.player.firingRange*h,b=(256-this.world.player.direction)*2*e/256,c=n(this.world.player.x/f+k(b)*a)-h/2,d=n(this.world.player.y/f+o(b)*a)-h/2;return this.drawTile(17,4,c,d)},b.prototype.drawCursor=function(){var a,b,c,d;a=this.mouse,c=a[0],d=a[1],b=this.getCellAtScreen(c,d);return this.drawTile(18,6,b.x*h,b.y*h)},b.prototype.initHud=function(){this.hud=$("<div/>").appendTo("body"),this.initHudTankStatus(),this.initHudPillboxes(),this.initHudBases(),this.initHudToolSelect(),this.initHudNotices();return this.updateHud()},b.prototype.initHudTankStatus=function(){var a,b,c,d,e,f;e=$("<div/>",{id:"tankStatus"}).appendTo(this.hud),$("<div/>",{"class":"deco"}).appendTo(e),this.tankIndicators={};for(a=0,b=(c=["shells","mines","armour","trees"]).length;a<b;a++)f=c[a],d=$("<div/>",{"class":"gauge",id:"tank-"+f}).appendTo(e),this.tankIndicators[f]=$("<div class=\"gauge-content\"></div>").appendTo(d);return},b.prototype.initHudPillboxes=function(){var a,b,c,d,e,f,g;e=$("<div/>",{id:"pillStatus"}).appendTo(this.hud),$("<div/>",{"class":"deco"}).appendTo(e),this.pillIndicators=function(){d=[];for(a=0,b=(c=this.world.map.pills).length;a<b;a++)g=c[a],d.push(function(){f=$("<div/>",{"class":"pill"}).appendTo(e);return[f,g]}());return d}.call(this);return},b.prototype.initHudBases=function(){var a,b,c,d,e,f,g;f=$("<div/>",{id:"baseStatus"}).appendTo(this.hud),$("<div/>",{"class":"deco"}).appendTo(f),this.baseIndicators=function(){d=[];for(a=0,b=(c=this.world.map.bases).length;a<b;a++)e=c[a],d.push(function(){g=$("<div/>",{"class":"base"}).appendTo(f);return[g,e]}());return d}.call(this);return},b.prototype.initHudToolSelect=function(){var a,b,c,d;this.currentTool=null,d=$("<div id=\"tool-select\" />").appendTo(this.hud);for(a=0,b=(c=["forest","road","building","pillbox","mine"]).length;a<b;a++)(function(){var b,e,f,g=c[a];f="tool-"+g,e=$("<input/>",{type:"radio",name:"tool",id:f}).appendTo(d),b=$("<label/>",{"for":f}).appendTo(d),b.append($("<span/>",{"class":"bolo-tool bolo-"+f}));return e.click(r(function(a){this.currentTool===g?(this.currentTool=null,d.find("input").removeAttr("checked"),d.buttonset("refresh")):this.currentTool=g;return this.world.input.focus()},this))}).call(this);return d.buttonset()},b.prototype.initHudNotices=function(){location.hostname.split(".")[1]==="github"&&$("<div/>").html("This is a work-in-progress; less than alpha quality!<br>\nTo see multiplayer in action, follow instructions on Github.").css({position:"absolute",top:"8px",left:"0px",width:"100%","text-align":"center","font-family":"monospace","font-size":"16px","font-weight":"bold",color:"white"}).appendTo(this.hud);return location.hostname.split(".")[1]==="github"||location.hostname.substr(-6)===".no.de"?$("<a href=\"http://github.com/stephank/orona\"></a>").css({position:"absolute",top:"0px",right:"0px"}).html("<img src=\"http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\" alt=\"Fork me on GitHub\">").appendTo(this.hud):undefined},b.prototype.updateHud=function(){var a,b,c,d,e,f,h,i,j,k,l,m,o,p,q,r,t,u;for(a=0,c=(e=this.pillIndicators).length;a<c;a++){f=e[a],o=f[0],q=f[1],t=""+q.inTank+";"+q.carried+";"+q.armour+";"+q.team;if(q.hudStatusKey===t)continue;q.hudStatusKey=t,q.inTank||q.carried?o.attr("status","carried"):q.armour===0?o.attr("status","dead"):o.attr("status","healthy"),m=g[q.team]||{r:112,g:112,b:112},o.css({"background-color":"rgb("+m.r+","+m.g+","+m.b+")"})}for(b=0,d=(h=this.baseIndicators).length;b<d;b++){i=h[b],o=i[0],l=i[1],t=""+l.armour+";"+l.team;if(l.hudStatusKey===t)continue;l.hudStatusKey=t,l.armour<=9?o.attr("status","vulnerable"):o.attr("status","healthy"),m=g[l.team]||{r:112,g:112,b:112},o.css({"background-color":"rgb("+m.r+","+m.g+","+m.b+")"})}p=this.world.player,p.hudLastStatus||(p.hudLastStatus={}),k=[];for(r in j=this.tankIndicators){if(!s.call(j,r))continue;o=j[r],u=p.armour===255?0:p[r];if(p.hudLastStatus[r]===u)continue;p.hudLastStatus[r]=u,o.css({height:""+n(u/40*100)+"%"})}return k},a.exports=b}).call(this)}),require.module("bolo/team_colors",function(a,b,c){(function(){var b;b=[{r:255,g:0,b:0,name:"red"},{r:0,g:0,b:255,name:"blue"},{r:0,g:255,b:0,name:"green"},{r:0,g:255,b:255,name:"cyan"},{r:255,g:255,b:0,name:"yellow"},{r:255,g:0,b:255,name:"magenta"}],a.exports=b}).call(this)}),require.module("bolo/world_mixin",function(a,b,c){(function(){var b;b={boloInit:function(){return this.tanks=[]},addTank:function(a){a.tank_idx=this.tanks.length,this.tanks.push(a);return this.authority?this.resolveMapObjectOwners():undefined},removeTank:function(a){var b,c,d;this.tanks.splice(a.tank_idx,1);for(d=b=a.tank_idx,c=this.tanks.length;b<=c?d<c:d>c;b<=c?d+=1:d-=1)this.tanks[d].tank_idx=d;return this.authority?this.resolveMapObjectOwners():undefined},getAllMapObjects:function(){return this.map.pills.concat(this.map.bases)},spawnMapObjects:function(){var a,b,c,d;for(a=0,b=(c=this.getAllMapObjects()).length;a<b;a++)d=c[a],d.world=this,this.insert(d),d.spawn(),d.anySpawn();return},resolveMapObjectOwners:function(){var a,b,c,d,e;for(a=0,b=(c=this.getAllMapObjects()).length;a<b;a++)e=c[a],e.ref("owner",this.tanks[e.owner_idx]),(d=e.cell)!=null?d.retile():undefined;return}},a.exports=b}).call(this)}),require.module("bolo/client/world/client",function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n=function(a,b){return function(){return a.apply(b,arguments)}},o=Object.prototype.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};d=c("villain/world/net/client"),g=c("../../world_map"),i=c("../../objects/all"),h=c("../../objects/world_pillbox"),f=c("../../objects/world_base"),m=c("../../struct").unpack,j=c("../base64").decodeBase64,l=c("../../net"),k=c("../../helpers"),e="<div id=\"join-dialog\">\n  <div>\n    <p>What is your name?</p>\n    <p><input type=\"text\" id=\"join-nick-field\" name=\"join-nick-field\" maxlength=20></input></p>\n  </div>\n  <div id=\"join-team\">\n    <p>Choose a side:</p>\n    <p>\n      <input type=\"radio\" id=\"join-team-red\" name=\"join-team\" value=\"red\"></input>\n      <label for=\"join-team-red\"><span class=\"bolo-team bolo-team-red\"></span></label>\n      <input type=\"radio\" id=\"join-team-blue\" name=\"join-team\" value=\"blue\"></input>\n      <label for=\"join-team-blue\"><span class=\"bolo-team bolo-team-blue\"></span></label>\n    </p>\n  </div>\n  <div>\n    <p><input type=\"button\" name=\"join-submit\" id=\"join-submit\" value=\"Join game\"></input></p>\n  </div>\n</div>",b=function(){function a(){a.__super__.constructor.apply(this,arguments),this.mapChanges={},this.processingServerMessages=false;return this}return a}(),p(b,d),b.prototype.authority=false,b.prototype.loaded=function(a){var b,c,d;this.vignette=a,this.vignette.message("Connecting to the multiplayer game"),this.heartbeatTimer=0;if(b=/^\?([a-z]{20})$/.exec(location.search))c="/match/"+b[1];else{if(location.search)return this.vignette.message("Invalid game ID");c="/demo"}this.ws=new WebSocket("ws://"+location.host+c),d=$(this.ws),d.one("open.bolo",n(function(){return this.connected()},this));return d.one("close.bolo",n(function(){return this.failure("Connection lost")},this))},b.prototype.connected=function(){var a;this.vignette.message("Waiting for the game map"),a=$(this.ws);return a.one("message.bolo",n(function(a){return this.receiveMap(a.originalEvent)},this))},b.prototype.receiveMap=function(a){this.map=g.load(j(a.data)),this.commonInitialization(),this.vignette.message("Waiting for the game state");return $(this.ws).bind("message.bolo",n(function(a){return this.handleMessage(a.originalEvent)},this))},b.prototype.synchronized=function(){var a,b,c,d,f,g,h;this.rebuildMapObjects(),this.vignette.destroy(),this.vignette=null,this.loop.start(),g=d=0;for(a=0,b=(c=this.tanks).length;a<b;a++)h=c[a],h.team===0&&g++,h.team===1&&d++;f=d<g?"blue":"red",this.joinDialog=$(e).dialog({dialogClass:"unclosable"});return this.joinDialog.find("#join-nick-field").val($.cookie("nick")||"").focus().keydown(n(function(a){return a.which===13?this.join():undefined},this)).end().find("#join-team-"+f).attr("checked","checked").end().find("#join-team").buttonset().end().find("#join-submit").button().click(n(function(){return this.join()},this))},b.prototype.join=function(){var a,b;a=this.joinDialog.find("#join-nick-field").val(),b=this.joinDialog.find("#join-team input[checked]").val(),b=function(){switch(b){case"red":return 0;case"blue":return 1;default:return-1}}();if(!(a&&b!==-1))return;$.cookie("nick",a),this.joinDialog.dialog("destroy"),this.joinDialog=null,this.ws.send(JSON.stringify({command:"join",nick:a,team:b}));return this.input.focus()},b.prototype.receiveWelcome=function(a){this.player=a,this.renderer.initHud();return this.initChat()},b.prototype.tick=function(){b.__super__.tick.apply(this,arguments),this.increasingRange!==this.decreasingRange?++this.rangeAdjustTimer===6&&(this.increasingRange?this.ws.send(l.INC_RANGE):this.ws.send(l.DEC_RANGE),this.rangeAdjustTimer=0):this.rangeAdjustTimer=0;if(++this.heartbeatTimer===10){this.heartbeatTimer=0;return this.ws.send("")}},b.prototype.failure=function(a){this.ws&&(this.ws.close(),$(this.ws).unbind(".bolo"),this.ws=null);return b.__super__.failure.apply(this,arguments)},b.prototype.soundEffect=function(a,b,c,d){},b.prototype.mapChanged=function(a,b,c,d){if(this.processingServerMessages)return;this.mapChanges[a.idx]!=null||(a._net_oldType=b,a._net_hadMine=c,a._net_oldLife=d,this.mapChanges[a.idx]=a);return},b.prototype.initChat=function(){this.chatMessages=$("<div/>",{id:"chat-messages"}).appendTo(this.renderer.hud),this.chatContainer=$("<div/>",{id:"chat-input"}).appendTo(this.renderer.hud).hide();return this.chatInput=$("<input/>",{type:"text",name:"chat",maxlength:140}).appendTo(this.chatContainer).keydown(n(function(a){return this.handleChatKeydown(a)},this))},b.prototype.openChat=function(a){a||(a={}),this.chatContainer.show();return this.chatInput.val("").focus().team=a.team},b.prototype.commitChat=function(){this.ws.send(JSON.stringify({command:this.chatInput.team?"teamMsg":"msg",text:this.chatInput.val()}));return this.closeChat()},b.prototype.closeChat=function(){this.chatContainer.hide();return this.input.focus()},b.prototype.receiveChat=function(a,b,c){var d;c||(c={}),d=c.team?$("<p/>",{"class":"msg-team"}).text("<"+a.name+"> "+b):$("<p/>",{"class":"msg"}).text("<"+a.name+"> "+b),this.chatMessages.append(d);return window.setTimeout(n(function(){return d.remove()},this),7e3)},b.prototype.handleKeydown=function(a){if(!(this.ws&&this.player))return;switch(a.which){case 32:return this.ws.send(l.START_SHOOTING);case 37:return this.ws.send(l.START_TURNING_CCW);case 38:return this.ws.send(l.START_ACCELERATING);case 39:return this.ws.send(l.START_TURNING_CW);case 40:return this.ws.send(l.START_BRAKING);case 84:return this.openChat();case 82:return this.openChat({team:true})}},b.prototype.handleKeyup=function(a){if(!(this.ws&&this.player))return;switch(a.which){case 32:return this.ws.send(l.STOP_SHOOTING);case 37:return this.ws.send(l.STOP_TURNING_CCW);case 38:return this.ws.send(l.STOP_ACCELERATING);case 39:return this.ws.send(l.STOP_TURNING_CW);case 40:return this.ws.send(l.STOP_BRAKING)}},b.prototype.handleChatKeydown=function(a){if(!(this.ws&&this.player))return;switch(a.which){case 13:this.commitChat();break;case 27:this.closeChat();break;default:return}return a.preventDefault()},b.prototype.buildOrder=function(a,b,c){if(!(this.ws&&this.player))return;b||(b=0);return this.ws.send([l.BUILD_ORDER,a,b,c.x,c.y].join(","))},b.prototype.handleMessage=function(a){var b,c,d,e,f,g,h,i,k,l;h=null;if(a.data.charAt(0)==="{")try{this.handleJsonCommand(JSON.parse(a.data))}catch(a){h=a}else if(a.data.charAt(0)==="[")try{for(b=0,c=(d=JSON.parse(a.data)).length;b<c;b++)k=d[b],this.handleJsonCommand(k)}catch(a){h=a}else{this.netRestore();try{g=j(a.data),l=0,i=g.length,this.processingServerMessages=true;while(l<i)f=g[l++],e=this.handleBinaryCommand(f,g,l),l+=e;this.processingServerMessages=false,l!==i&&(h=new Error("Message length mismatch, processed "+l+" out of "+i+" bytes"))}catch(a){h=a}}if(h){this.failure("Connection lost (protocol error)"),typeof console!=="undefined"&&console!==null?console.log("Following exception occurred while processing message:",a.data):undefined;throw h}},b.prototype.handleBinaryCommand=function(a,b,c){var d,e,f,g,h,i,j,k,n,o,p,q,r,s,t,u,v,w;switch(a){case l.SYNC_MESSAGE:this.synchronized();return 0;case l.WELCOME_MESSAGE:d=m("H",b,c),u=d[0][0],k=d[1],this.receiveWelcome(this.objects[u]);return k;case l.CREATE_MESSAGE:return this.netSpawn(b,c);case l.DESTROY_MESSAGE:return this.netDestroy(b,c);case l.MAPCHANGE_MESSAGE:e=m("BBBBf",b,c),f=e[0],v=f[0],w=f[1],o=f[2],q=f[3],r=f[4],k=e[1],j=String.fromCharCode(o),n=this.map.cells[w][v],n.setType(j,r),n.life=q;return k;case l.SOUNDEFFECT_MESSAGE:g=m("BHHH",b,c),h=g[0],t=h[0],v=h[1],w=h[2],s=h[3],k=g[1],this.renderer.playSound(t,v,w,this.objects[s]);return k;case l.TINY_UPDATE_MESSAGE:i=m("H",b,c),p=i[0][0],k=i[1],k+=this.netUpdate(this.objects[p],b,c+k);return k;case l.UPDATE_MESSAGE:return this.netTick(b,c);default:throw new Error("Bad command '"+a+"' from server, at offset "+(c-1))}},b.prototype.handleJsonCommand=function(a){switch(a.command){case"nick":return this.objects[a.idx].name=a.nick;case"msg":return this.receiveChat(this.objects[a.idx],a.text);case"teamMsg":return this.receiveChat(this.objects[a.idx],a.text,{team:true});default:throw new Error("Bad JSON command '"+a.command+"' from server.")}},b.prototype.rebuildMapObjects=function(){var a,b,c,d,e;this.map.pills=[],this.map.bases=[];for(a=0,b=(c=this.objects).length;a<b;a++){e=c[a];if(e instanceof h)this.map.pills.push(e);else if(e instanceof f)this.map.bases.push(e);else continue;(d=e.cell)!=null?d.retile():undefined}return},b.prototype.netRestore=function(){var a,c,d;b.__super__.netRestore.apply(this,arguments);for(d in a=this.mapChanges){if(!o.call(a,d))continue;c=a[d],c.setType(c._net_oldType,c._net_hadMine),c.life=c._net_oldLife}return this.mapChanges={}},k.extend(b.prototype,c("./mixin")),i.registerWithWorld(b.prototype),a.exports=b}).call(this)}),require.module("villain/world/net/client",function(a,b,c){(function(){var b,d,e,f,g,h=Array.prototype.slice,i=function(a,b){return function(){return a.apply(b,arguments)}},j=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,typeof b.extended==="function"&&b.extended(a),a.__super__=b.prototype};b=c("../base"),e=c("../../struct"),g=e.unpack,f=e.buildUnpacker,d=function(){return function a(){a.__super__.constructor.apply(this,arguments),this.changes=[];return this}}(),j(d,b),d.prototype.registerType=function(a){this.hasOwnProperty("types")||(this.types=[]);return this.types.push(a)},d.prototype.spawn=function(a){var b,c;b=h.call(arguments,1),c=this.insert(new a(this)),this.changes.unshift(["create",c.idx,c]),c._net_transient=true,c.spawn.apply(c,b),c.anySpawn();return c},d.prototype.update=function(a){a.update(),a.emit("update"),a.emit("anyUpdate");return a},d.prototype.destroy=function(a){this.changes.unshift(["destroy",a.idx,a]),this.remove(a),a.emit("destroy"),a._net_transient&&a.emit("finalize");return a},d.prototype.netRestore=function(){var a,b,c,d,e,f,g,h;if(!(this.changes.length>0))return null;c=this.changes;for(a=0,b=c.length;a<b;a++){d=c[a],h=d[0],f=d[1],g=d[2];switch(h){case"create":g.transient&&!g._net_revived&&g.emit("finalize"),this.objects.splice(f,1);break;case"destroy":g._net_revived=true,this.objects.splice(f,0,g)}}this.changes=[],c=this.objects;for(e=0,b=c.length;e<b;e++)g=c[e],g.idx=e;return null},d.prototype.netSpawn=function(a,b){var c,d;d=this.types[a[b]],c=this.insert(new d(this)),c._net_transient=false,c._net_new=true;return 1},d.prototype.netUpdate=function(a,b,c){var d,e,f;d=this.deserialize(a,b,c,a._net_new),e=d[0],f=d[1],a._net_new?(a.netSpawn(),a.anySpawn(),a._net_new=false):(a.emit("netUpdate",f),a.emit("anyUpdate")),a.emit("netSync");return e},d.prototype.netDestroy=function(a,b){var c,d,e,f;c=g("H",a,b),f=c[0][0],d=c[1],e=this.objects[f],e._net_new||(e.emit("netDestroy"),e.emit("anyDestroy"),e.emit("finalize")),this.remove(e);return d},d.prototype.netTick=function(a,b){var c,d,e,f,g;f=0,e=this.objects;for(c=0,d=e.length;c<d;c++)g=e[c],f+=this.netUpdate(g,a,b+f);return f},d.prototype.deserialize=function(a,b,c,d){var e,g;g=f(b,c),e={},a.serialization(d,i(function(b,c,d){var f,h,i,j;d||(d={}),b==="O"?(i=this.objects[g("H")],(h=(f=a[c])!=null?f.$:undefined)!==i&&(e[c]=h,a.ref(c,i))):(j=g(b),d.rx!=null&&(j=d.rx(j)),(h=a[c])!==j&&(e[c]=h,a[c]=j));return null},this));return[g.finish(),e]},a.exports=d}).call(this)}),require.module("villain/struct",function(a,b,c){(function(){var a,c,d,e,f,g,h,i,j,k;j=function(a){return[a&255]},h=function(a){return[(a&65280)>>8,a&255]},i=function(a){return[(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]},f=function(a,b){return a[b]},d=function(a,b){return(a[b]<<8)+a[b+1]},e=function(a,b){return(a[b]<<24)+(a[b+1]<<16)+(a[b+2]<<8)+a[b+3]},a=function(){var a,b,c,d,e;c=[],b=null,a=0,d=function(){if(b===null)return null;c.push(b);return b=null},e=function(e,f){if(e==="f"){if(b===null){b=f?1:0;return a=1}!f||(b|=1<<a),a++;return a===8?d():undefined}d();return c=c.concat(function(){switch(e){case"B":return j(f);case"H":return h(f);case"I":return i(f);default:throw new Error("Unknown format character "+e)}}())},e.finish=function(){d();return c};return e},c=function(a,b){var c,g,h;b||(b=0),g=b,c=0,h=function(b){var h,i,j,k;b==="f"?(i=1<<c&a[g],k=i>0,c++,c===8&&(g++,c=0)):(c!==0&&(g++,c=0),h=function(){switch(b){case"B":return[f(a,g),1];case"H":return[d(a,g),2];case"I":return[e(a,g),4];default:throw new Error("Unknown format character "+b)}}(),k=h[0],j=h[1],g+=j);return k},h.finish=function(){c!==0&&g++;return g-b};return h},g=function(b){var c,d,e,f,g;e=a();for(d=0,c=b.length;d<c;d++)f=b[d],g=arguments[d+1],e(f,g);return e.finish()},k=function(a,b,d){var e,f,g,h,i,j;i=c(b,d),j=function(){g=[];for(e=0,f=a.length;e<f;e++)h=a[e],g.push(i(h));return g}();return[j,i.finish()]},b.buildPacker=a,b.buildUnpacker=c,b.pack=g,b.unpack=k}).call(this)}),require.module("bolo/struct",function(a,b,c){(function(){var a,c,d,e,f,g,h,i,j,k;j=function(a){return[a&255]},h=function(a){return[(a&65280)>>8,a&255]},i=function(a){return[(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]},f=function(a,b){return a[b]},d=function(a,b){return(a[b]<<8)+a[b+1]},e=function(a,b){return(a[b]<<24)+(a[b+1]<<16)+(a[b+2]<<8)+a[b+3]},a=function(){var a,b,c,d,e;c=[],b=null,a=0,d=function(){if(b===null)return;c.push(b);return b=null},e=function(e,f){if(e==="f"){if(b===null){b=f?1:0;return a=1}!f||(b|=1<<a),a++;return a===8?d():undefined}d();return c=c.concat(function(){switch(e){case"B":return j(f);case"H":return h(f);case"I":return i(f);default:throw new Error("Unknown format character "+e)}}())},e.finish=function(){d();return c};return e},c=function(a,b){var c,g,h;b||(b=0),g=b,c=0,h=function(b){var h,i,j,k;b==="f"?(i=1<<c&a[g],k=i>0,c++,c===8&&(g++,c=0)):(c!==0&&(g++,c=0),h=function(){switch(b){case"B":return[f(a,g),1];case"H":return[d(a,g),2];case"I":return[e(a,g),4];default:throw new Error("Unknown format character "+b)}}(),k=h[0],j=h[1],g+=j);return k},h.finish=function(){c!==0&&g++;return g-b};return h},g=function(b){var c,d,e,f,g;e=a();for(d=0,c=b.length;d<c;d++)f=b[d],g=arguments[d+1],e(f,g);return e.finish()},k=function(a,b,d){var e,f,g,h,i,j;i=c(b,d),j=function(){g=[];for(e=0,f=a.length;e<f;e++)h=a[e],g.push(i(h));return g}();return[j,i.finish()]},b.buildPacker=a,b.buildUnpacker=c,b.pack=g,b.unpack=k}).call(this)})